  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "assignments"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE TABLE "assignments" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "investigation_id" integer, "officer_id" integer, "start_date" date, "end_date" date)[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE  INDEX "index_assignments_on_investigation_id" ON "assignments" ("investigation_id")[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE  INDEX "index_assignments_on_officer_id" ON "assignments" ("officer_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "crime_investigations"[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE TABLE "crime_investigations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "crime_id" integer, "investigation_id" integer)[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE  INDEX "index_crime_investigations_on_crime_id" ON "crime_investigations" ("crime_id")[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX "index_crime_investigations_on_investigation_id" ON "crime_investigations" ("investigation_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "crimes"[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE TABLE "crimes" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "felony" boolean, "active" boolean DEFAULT 1)[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "investigation_notes"[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "investigation_notes" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "investigation_id" integer, "officer_id" integer, "content" text, "date" date)[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE  INDEX "index_investigation_notes_on_investigation_id" ON "investigation_notes" ("investigation_id")[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE  INDEX "index_investigation_notes_on_officer_id" ON "investigation_notes" ("officer_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "investigations"[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE TABLE "investigations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar, "description" text, "crime_location" varchar, "date_opened" date, "date_closed" date, "solved" boolean, "batman_involved" boolean)[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "officers"[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE TABLE "officers" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "first_name" varchar, "last_name" varchar, "unit_id" integer, "rank" varchar, "ssn" varchar, "role" varchar, "username" varchar, "password_digest" varchar, "active" boolean DEFAULT 1)[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE  INDEX "index_officers_on_unit_id" ON "officers" ("unit_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "units"[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE TABLE "units" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "active" boolean DEFAULT 1)[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (1.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200420174613)[0m
  [1m[35m (1.6ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20200420174527),
(20200420174458),
(20200420174537),
(20200420174518),
(20200420174509),
(20200420174550);

[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.3ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2020-04-23 08:54:07.768893"], ["updated_at", "2020-04-23 08:54:07.768893"]]
  [1m[35m (0.8ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------------------------
CrimeTest: test_: Crime should have many investigations through crime_investigations. 
--------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
CrimeTest: test_: Within context should have active and inactive scopes. 
-------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.4ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Murder"], ["felony", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder, Second Degree"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony", "active") VALUES (?, ?, ?)[0m  [["name", "Murder, Second Degree"], ["felony", 1], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Arson"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Arson"], ["felony", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Robbery"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Robbery"], ["felony", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Trespass"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Trespass"], ["felony", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "crimes" WHERE "crimes"."active" = ?[0m  [["active", 1]]
  [1m[36mCrime Load (0.1ms)[0m  [1m[34mSELECT "crimes".* FROM "crimes" WHERE "crimes"."active" = ?[0m  [["active", 1]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "crimes" WHERE "crimes"."active" != ?[0m  [["active", 1]]
  [1m[36mCrime Load (0.1ms)[0m  [1m[34mSELECT "crimes".* FROM "crimes" WHERE "crimes"."active" != ?[0m  [["active", 1]]
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------
CrimeTest: test_: Within context should have a misdemeanors scope. 
-------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.2ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Murder"], ["felony", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder, Second Degree"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony", "active") VALUES (?, ?, ?)[0m  [["name", "Murder, Second Degree"], ["felony", 1], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Arson"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Arson"], ["felony", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Robbery"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Robbery"], ["felony", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Trespass"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Trespass"], ["felony", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "crimes" WHERE "crimes"."felony" != ?[0m  [["felony", 1]]
  [1m[36mCrime Load (0.1ms)[0m  [1m[34mSELECT "crimes".* FROM "crimes" WHERE "crimes"."felony" != ?[0m  [["felony", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
CrimeTest: test_: Within context should have make_active and make_inactive methods. 
------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.3ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Murder"], ["felony", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder, Second Degree"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony", "active") VALUES (?, ?, ?)[0m  [["name", "Murder, Second Degree"], ["felony", 1], ["active", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Arson"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Arson"], ["felony", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Robbery"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Robbery"], ["felony", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Trespass"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Trespass"], ["felony", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) AND "crimes"."id" != ? LIMIT ?[0m  [["name", "Arson"], ["id", 3], ["LIMIT", 1]]
  [1m[36mCrime Update (0.1ms)[0m  [1m[33mUPDATE "crimes" SET "active" = ? WHERE "crimes"."id" = ?[0m  [["active", 0], ["id", 3]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCrime Load (0.1ms)[0m  [1m[34mSELECT  "crimes".* FROM "crimes" WHERE "crimes"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) AND "crimes"."id" != ? LIMIT ?[0m  [["name", "Arson"], ["id", 3], ["LIMIT", 1]]
  [1m[36mCrime Update (0.1ms)[0m  [1m[33mUPDATE "crimes" SET "active" = ? WHERE "crimes"."id" = ?[0m  [["active", 1], ["id", 3]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCrime Load (0.1ms)[0m  [1m[34mSELECT  "crimes".* FROM "crimes" WHERE "crimes"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------
CrimeTest: test_: Within context should never be destroyed. 
------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.2ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Murder"], ["felony", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder, Second Degree"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony", "active") VALUES (?, ?, ?)[0m  [["name", "Murder, Second Degree"], ["felony", 1], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Arson"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Arson"], ["felony", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Robbery"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Robbery"], ["felony", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Trespass"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Trespass"], ["felony", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------
CrimeTest: test_: Crime should require unique value for name. 
--------------------------------------------------------------
  [1m[36mCrime Load (0.3ms)[0m  [1m[34mSELECT  "crimes".* FROM "crimes" ORDER BY "crimes"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Create (0.3ms)[0m  [1m[32mINSERT INTO "crimes" ("name") VALUES (?)[0m  [["name", "a"]]
  [1m[35m (2.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "A"], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------------
CrimeTest: test_: Within context should have an alphabetical scope for ordering. 
---------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.2ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Murder"], ["felony", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder, Second Degree"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony", "active") VALUES (?, ?, ?)[0m  [["name", "Murder, Second Degree"], ["felony", 1], ["active", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Arson"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Arson"], ["felony", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Robbery"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.2ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Robbery"], ["felony", 1]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Trespass"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Trespass"], ["felony", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCrime Load (0.1ms)[0m  [1m[34mSELECT "crimes".* FROM "crimes" ORDER BY "crimes"."name" ASC[0m
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------
CrimeTest: test_: Crime should have many crime_investigations. 
---------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------
CrimeTest: test_: Crime should require name to be set. 
-------------------------------------------------------
  [1m[36mCrime Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE "crimes"."name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------
CrimeTest: test_: Within context should have a felonies scope. 
---------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.4ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Murder"], ["felony", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder, Second Degree"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony", "active") VALUES (?, ?, ?)[0m  [["name", "Murder, Second Degree"], ["felony", 1], ["active", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Arson"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Arson"], ["felony", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Robbery"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Robbery"], ["felony", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Trespass"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Trespass"], ["felony", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "crimes" WHERE "crimes"."felony" = ?[0m  [["felony", 1]]
  [1m[36mCrime Load (0.1ms)[0m  [1m[34mSELECT "crimes".* FROM "crimes" WHERE "crimes"."felony" = ?[0m  [["felony", 1]]
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------------
OfficerTest: test_: Officer should not allow rank to be set to "officer". 
--------------------------------------------------------------------------
  [1m[36mOfficer Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "officers" WHERE "officers"."ssn" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mUnit Load (0.3ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."active" = ?[0m  [["active", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------
OfficerTest: test_: Officer should not allow rank to be set to "Major". 
------------------------------------------------------------------------
  [1m[36mOfficer Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "officers" WHERE "officers"."ssn" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mUnit Load (0.1ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."active" = ?[0m  [["active", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------------
OfficerTest: test_: Officer should require last_name to be set. 
----------------------------------------------------------------
  [1m[36mOfficer Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "officers" WHERE "officers"."ssn" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mUnit Load (0.1ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."active" = ?[0m  [["active", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------------------
OfficerTest: test_: Officer should allow rank to be set to "Captain". 
----------------------------------------------------------------------
  [1m[36mOfficer Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "officers" WHERE "officers"."ssn" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mUnit Load (0.1ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."active" = ?[0m  [["active", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------------------------------------------------------------------------------------------------------
OfficerTest: test_: Officer should ensure inclusion of rank in ["Officer", "Sergeant", "Detective", "Detective Sergeant", "Lieutenant", "Captain", "Commissioner"]. 
--------------------------------------------------------------------------------------------------------------------------------------------------------------------
  [1m[36mOfficer Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "officers" WHERE "officers"."ssn" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mUnit Load (0.1ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."active" = ?[0m  [["active", 1]]
  [1m[36mOfficer Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "officers" WHERE "officers"."ssn" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mUnit Load (0.1ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."active" = ?[0m  [["active", 1]]
  [1m[36mOfficer Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "officers" WHERE "officers"."ssn" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mUnit Load (0.1ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."active" = ?[0m  [["active", 1]]
  [1m[36mOfficer Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "officers" WHERE "officers"."ssn" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mUnit Load (0.0ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."active" = ?[0m  [["active", 1]]
  [1m[36mOfficer Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "officers" WHERE "officers"."ssn" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mUnit Load (0.0ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."active" = ?[0m  [["active", 1]]
  [1m[36mOfficer Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "officers" WHERE "officers"."ssn" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mUnit Load (0.1ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."active" = ?[0m  [["active", 1]]
  [1m[36mOfficer Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "officers" WHERE "officers"."ssn" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mUnit Load (0.1ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."active" = ?[0m  [["active", 1]]
  [1m[36mOfficer Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "officers" WHERE "officers"."ssn" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mUnit Load (0.0ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."active" = ?[0m  [["active", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------------------
OfficerTest: test_: Officer should allow ssn to be set to "123456789". 
-----------------------------------------------------------------------
  [1m[36mOfficer Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "officers" WHERE "officers"."ssn" = ? LIMIT ?[0m  [["ssn", "123456789"], ["LIMIT", 1]]
  [1m[36mUnit Load (0.1ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."active" = ?[0m  [["active", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
OfficerTest: test_: Officer should allow ssn to be set to "123-45-6789". 
-------------------------------------------------------------------------
  [1m[36mOfficer Exists (2.2ms)[0m  [1m[34mSELECT  1 AS one FROM "officers" WHERE "officers"."ssn" = ? LIMIT ?[0m  [["ssn", "123-45-6789"], ["LIMIT", 1]]
  [1m[36mUnit Load (0.1ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."active" = ?[0m  [["active", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------------
OfficerTest: test_: Officer should have many investigations through assignments. 
---------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------------------------------------------------
OfficerTest: test_: Within context should require users to have unique, case-insensitive usernames. 
----------------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Major Crimes"], ["LIMIT", 1]]
  [1m[36mUnit Create (1.1ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Major Crimes"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Headquarters"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Headquarters"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Homicide"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Homicide"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Section 31"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name", "active") VALUES (?, ?)[0m  [["name", "Section 31"], ["active", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (4.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------------------------------------
OfficerTest: test_: Within context should be able destroy officers without assignments. 
----------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Major Crimes"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.6ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Major Crimes"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Headquarters"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Headquarters"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Homicide"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Homicide"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Section 31"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.2ms)[0m  [1m[32mINSERT INTO "units" ("name", "active") VALUES (?, ?)[0m  [["name", "Section 31"], ["active", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------------------------------
OfficerTest: test_: Within context should shows that Jim Gordon's ssn is stripped of non-digits. 
-------------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Major Crimes"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.5ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Major Crimes"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Headquarters"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Headquarters"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Homicide"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Homicide"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Section 31"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name", "active") VALUES (?, ?)[0m  [["name", "Section 31"], ["active", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------
OfficerTest: test_: Officer should have many assignments. 
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------------------------------------------------------
OfficerTest: test_: Within context should not destroy officers with assignments but can be made inactive. 
----------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Major Crimes"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.4ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Major Crimes"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Headquarters"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Headquarters"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Homicide"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Homicide"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Section 31"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name", "active") VALUES (?, ?)[0m  [["name", "Section 31"], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
OfficerTest: test_: Officer should not allow ssn to be set to "bad". 
---------------------------------------------------------------------
  [1m[36mOfficer Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "officers" WHERE "officers"."ssn" = ? LIMIT ?[0m  [["ssn", "bad"], ["LIMIT", 1]]
  [1m[36mUnit Load (0.0ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."active" = ?[0m  [["active", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------------------------------
OfficerTest: test_: Within context should require passwords to be at least four characters. 
--------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Major Crimes"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.3ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Major Crimes"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Headquarters"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Headquarters"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Homicide"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Homicide"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Section 31"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name", "active") VALUES (?, ?)[0m  [["name", "Section 31"], ["active", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------------
OfficerTest: test_: Within context should not be made inactive for a bad edit. 
-------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Major Crimes"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.2ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Major Crimes"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Headquarters"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Headquarters"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Homicide"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Homicide"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Section 31"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name", "active") VALUES (?, ?)[0m  [["name", "Section 31"], ["active", 0]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.9ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------------
OfficerTest: test_: Within context should shows name as last, first name. 
--------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Major Crimes"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.3ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Major Crimes"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Headquarters"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Headquarters"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Homicide"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Homicide"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Section 31"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name", "active") VALUES (?, ?)[0m  [["name", "Section 31"], ["active", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
OfficerTest: test_: Officer should allow ssn to be set to "123 45 6789". 
-------------------------------------------------------------------------
  [1m[36mOfficer Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "officers" WHERE "officers"."ssn" = ? LIMIT ?[0m  [["ssn", "123 45 6789"], ["LIMIT", 1]]
  [1m[36mUnit Load (0.0ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."active" = ?[0m  [["active", 1]]
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------------
OfficerTest: test_: Officer should require first_name to be set. 
-----------------------------------------------------------------
  [1m[36mOfficer Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "officers" WHERE "officers"."ssn" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mUnit Load (0.1ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."active" = ?[0m  [["active", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------------------
OfficerTest: test_: Officer should require case sensitive unique value for ssn. 
--------------------------------------------------------------------------------
  [1m[36mOfficer Load (0.2ms)[0m  [1m[34mSELECT  "officers".* FROM "officers" ORDER BY "officers"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOfficer Create (1.0ms)[0m  [1m[32mINSERT INTO "officers" ("ssn") VALUES (?)[0m  [["ssn", ""]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOfficer Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "officers" WHERE "officers"."ssn" = ? LIMIT ?[0m  [["ssn", ""], ["LIMIT", 1]]
  [1m[36mUnit Load (0.1ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."active" = ?[0m  [["active", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------------------
OfficerTest: test_: Officer should not allow rank to be set to "bad". 
----------------------------------------------------------------------
  [1m[36mOfficer Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "officers" WHERE "officers"."ssn" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mUnit Load (0.1ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."active" = ?[0m  [["active", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------
OfficerTest: test_: Officer should have many investigation_notes. 
------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------------------------------
OfficerTest: test_: Within context should return current_assignments for officer with assignments. 
---------------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Major Crimes"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.3ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Major Crimes"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Headquarters"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Headquarters"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Homicide"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Homicide"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Section 31"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name", "active") VALUES (?, ?)[0m  [["name", "Section 31"], ["active", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------------
OfficerTest: test_: Officer should allow rank to be set to "Detective Sergeant". 
---------------------------------------------------------------------------------
  [1m[36mOfficer Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "officers" WHERE "officers"."ssn" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mUnit Load (0.1ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."active" = ?[0m  [["active", 1]]
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------------
OfficerTest: test_: Within context should require passwords to be confirmed and matching. 
------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Major Crimes"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.3ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Major Crimes"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Headquarters"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.3ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Headquarters"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Homicide"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Homicide"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Section 31"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name", "active") VALUES (?, ?)[0m  [["name", "Section 31"], ["active", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------------------------
OfficerTest: test_: Within context should require a password for new users. 
----------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Major Crimes"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.2ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Major Crimes"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Headquarters"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Headquarters"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Homicide"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.2ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Homicide"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Section 31"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name", "active") VALUES (?, ?)[0m  [["name", "Section 31"], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------------------------------
OfficerTest: test_: Within context should have an alphabetical scope for ordering. 
-----------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Major Crimes"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.3ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Major Crimes"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Headquarters"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Headquarters"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Homicide"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Homicide"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Section 31"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name", "active") VALUES (?, ?)[0m  [["name", "Section 31"], ["active", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
OfficerTest: test_: Officer should belong to unit. 
---------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------------
OfficerTest: test_: Officer should not allow ssn to be set to "12345678". 
--------------------------------------------------------------------------
  [1m[36mOfficer Exists (1.2ms)[0m  [1m[34mSELECT  1 AS one FROM "officers" WHERE "officers"."ssn" = ? LIMIT ?[0m  [["ssn", "12345678"], ["LIMIT", 1]]
  [1m[36mUnit Load (1.1ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."active" = ?[0m  [["active", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------
OfficerTest: test_: Within context should have a detectives scope. 
-------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Major Crimes"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.8ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Major Crimes"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Headquarters"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Headquarters"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Homicide"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Homicide"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Section 31"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name", "active") VALUES (?, ?)[0m  [["name", "Section 31"], ["active", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------------------------------------------------
OfficerTest: test_: Within context should have a search scope that takes name fragment as parameter. 
-----------------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Major Crimes"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.3ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Major Crimes"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Headquarters"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Headquarters"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Homicide"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.0ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Homicide"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Section 31"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name", "active") VALUES (?, ?)[0m  [["name", "Section 31"], ["active", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------
OfficerTest: test_: Officer should allow rank to be set to "Detective". 
------------------------------------------------------------------------
  [1m[36mOfficer Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "officers" WHERE "officers"."ssn" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mUnit Load (0.1ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."active" = ?[0m  [["active", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (4.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------------------------------------------------
OfficerTest: test_: Within context should identify placing officer in a non-active unit is invalid. 
----------------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Major Crimes"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.4ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Major Crimes"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Headquarters"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Headquarters"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Homicide"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Homicide"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Section 31"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name", "active") VALUES (?, ?)[0m  [["name", "Section 31"], ["active", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------
OfficerTest: test_: Officer should not allow rank to be set to "1". 
--------------------------------------------------------------------
  [1m[36mOfficer Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "officers" WHERE "officers"."ssn" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mUnit Load (0.1ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."active" = ?[0m  [["active", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------------
OfficerTest: test_: Officer should allow rank to be set to nil. 
----------------------------------------------------------------
  [1m[36mOfficer Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "officers" WHERE "officers"."ssn" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mUnit Load (0.1ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."active" = ?[0m  [["active", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------------------------
OfficerTest: test_: Within context should have make_active and make_inactive methods. 
--------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Major Crimes"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.3ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Major Crimes"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Headquarters"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Headquarters"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Homicide"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Homicide"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Section 31"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name", "active") VALUES (?, ?)[0m  [["name", "Section 31"], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.9ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------------------
OfficerTest: test_: Officer should allow rank to be set to "Sergeant". 
-----------------------------------------------------------------------
  [1m[36mOfficer Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "officers" WHERE "officers"."ssn" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mUnit Load (0.0ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."active" = ?[0m  [["active", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------------------------
OfficerTest: test_: Within context should have role methods and recognize all three roles. 
-------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Major Crimes"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.6ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Major Crimes"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Headquarters"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Headquarters"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Homicide"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Homicide"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Section 31"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name", "active") VALUES (?, ?)[0m  [["name", "Section 31"], ["active", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
OfficerTest: test_: Officer should allow rank to be set to "Lieutenant". 
-------------------------------------------------------------------------
  [1m[36mOfficer Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "officers" WHERE "officers"."ssn" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mUnit Load (0.1ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."active" = ?[0m  [["active", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------
OfficerTest: test_: Officer should not allow ssn to be set to nil. 
-------------------------------------------------------------------
  [1m[36mOfficer Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "officers" WHERE "officers"."ssn" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mUnit Load (0.1ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."active" = ?[0m  [["active", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------------------------
OfficerTest: test_: Within context should terminate assignments of inactive officers. 
--------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Major Crimes"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.2ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Major Crimes"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Headquarters"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Headquarters"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Homicide"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Homicide"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Section 31"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.2ms)[0m  [1m[32mINSERT INTO "units" ("name", "active") VALUES (?, ?)[0m  [["name", "Section 31"], ["active", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------------------------------------------------------------
OfficerTest: test_: Within context should show that current_assignments for officer with no assignments is nil. 
----------------------------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Major Crimes"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.3ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Major Crimes"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Headquarters"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Headquarters"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Homicide"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Homicide"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Section 31"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name", "active") VALUES (?, ?)[0m  [["name", "Section 31"], ["active", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.3ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------
OfficerTest: test_: Officer should require unit_id to be set. 
--------------------------------------------------------------
  [1m[36mOfficer Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "officers" WHERE "officers"."ssn" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mUnit Load (0.1ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."active" = ?[0m  [["active", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------------------------------------------
OfficerTest: test_: Within context should have class method to handle authentication services. 
-----------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Major Crimes"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.3ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Major Crimes"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Headquarters"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Headquarters"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Homicide"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Homicide"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Section 31"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name", "active") VALUES (?, ?)[0m  [["name", "Section 31"], ["active", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------------------------
OfficerTest: test_: Officer should not allow ssn to be set to "1234567890". 
----------------------------------------------------------------------------
  [1m[36mOfficer Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "officers" WHERE "officers"."ssn" = ? LIMIT ?[0m  [["ssn", "1234567890"], ["LIMIT", 1]]
  [1m[36mUnit Load (0.1ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."active" = ?[0m  [["active", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
OfficerTest: test_: Within context should shows proper name as first and last name. 
------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Major Crimes"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.3ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Major Crimes"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Headquarters"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Headquarters"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Homicide"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Homicide"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Section 31"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name", "active") VALUES (?, ?)[0m  [["name", "Section 31"], ["active", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------------------
OfficerTest: test_: Officer should allow rank to be set to "Officer". 
----------------------------------------------------------------------
  [1m[36mOfficer Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "officers" WHERE "officers"."ssn" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mUnit Load (0.0ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."active" = ?[0m  [["active", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------
OfficerTest: test_: Officer should allow rank to be set to "Commissioner". 
---------------------------------------------------------------------------
  [1m[36mOfficer Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "officers" WHERE "officers"."ssn" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mUnit Load (0.0ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."active" = ?[0m  [["active", 1]]
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------------------------------
OfficerTest: test_: Within context should have a for_unit scope that takes unit_id as parameter. 
-------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Major Crimes"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.7ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Major Crimes"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Headquarters"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Headquarters"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Homicide"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Homicide"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Section 31"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name", "active") VALUES (?, ?)[0m  [["name", "Section 31"], ["active", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------
OfficerTest: test_: Within context should have active and inactive scopes. 
---------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Major Crimes"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.3ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Major Crimes"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Headquarters"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Headquarters"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Homicide"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Homicide"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Section 31"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name", "active") VALUES (?, ?)[0m  [["name", "Section 31"], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------
CrimeTest: test_: Within context should have a misdemeanors scope. 
-------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.6ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Murder"], ["felony", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder, Second Degree"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony", "active") VALUES (?, ?, ?)[0m  [["name", "Murder, Second Degree"], ["felony", 1], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Arson"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Arson"], ["felony", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Robbery"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Robbery"], ["felony", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Trespass"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Trespass"], ["felony", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "crimes" WHERE "crimes"."felony" != ?[0m  [["felony", 1]]
  [1m[36mCrime Load (0.1ms)[0m  [1m[34mSELECT "crimes".* FROM "crimes" WHERE "crimes"."felony" != ?[0m  [["felony", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
CrimeTest: test_: Within context should have make_active and make_inactive methods. 
------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.3ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Murder"], ["felony", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder, Second Degree"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony", "active") VALUES (?, ?, ?)[0m  [["name", "Murder, Second Degree"], ["felony", 1], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Arson"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Arson"], ["felony", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Robbery"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Robbery"], ["felony", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Trespass"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Trespass"], ["felony", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) AND "crimes"."id" != ? LIMIT ?[0m  [["name", "Arson"], ["id", 3], ["LIMIT", 1]]
  [1m[36mCrime Update (0.1ms)[0m  [1m[33mUPDATE "crimes" SET "active" = ? WHERE "crimes"."id" = ?[0m  [["active", 0], ["id", 3]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCrime Load (0.1ms)[0m  [1m[34mSELECT  "crimes".* FROM "crimes" WHERE "crimes"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) AND "crimes"."id" != ? LIMIT ?[0m  [["name", "Arson"], ["id", 3], ["LIMIT", 1]]
  [1m[36mCrime Update (0.1ms)[0m  [1m[33mUPDATE "crimes" SET "active" = ? WHERE "crimes"."id" = ?[0m  [["active", 1], ["id", 3]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCrime Load (0.0ms)[0m  [1m[34mSELECT  "crimes".* FROM "crimes" WHERE "crimes"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------
CrimeTest: test_: Within context should never be destroyed. 
------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.3ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Murder"], ["felony", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder, Second Degree"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony", "active") VALUES (?, ?, ?)[0m  [["name", "Murder, Second Degree"], ["felony", 1], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Arson"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Arson"], ["felony", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Robbery"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.4ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Robbery"], ["felony", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Trespass"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Trespass"], ["felony", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------------------------
CrimeTest: test_: Crime should have many investigations through crime_investigations. 
--------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------
CrimeTest: test_: Crime should have many crime_investigations. 
---------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------------
CrimeTest: test_: Within context should have an alphabetical scope for ordering. 
---------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.3ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Murder"], ["felony", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder, Second Degree"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.2ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony", "active") VALUES (?, ?, ?)[0m  [["name", "Murder, Second Degree"], ["felony", 1], ["active", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Arson"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Arson"], ["felony", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Robbery"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Robbery"], ["felony", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Trespass"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Trespass"], ["felony", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCrime Load (0.4ms)[0m  [1m[34mSELECT "crimes".* FROM "crimes" ORDER BY "crimes"."name" ASC[0m
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
CrimeTest: test_: Within context should have active and inactive scopes. 
-------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.3ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Murder"], ["felony", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder, Second Degree"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony", "active") VALUES (?, ?, ?)[0m  [["name", "Murder, Second Degree"], ["felony", 1], ["active", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Arson"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Arson"], ["felony", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Robbery"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Robbery"], ["felony", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Trespass"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Trespass"], ["felony", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "crimes" WHERE "crimes"."active" = ?[0m  [["active", 1]]
  [1m[36mCrime Load (0.1ms)[0m  [1m[34mSELECT "crimes".* FROM "crimes" WHERE "crimes"."active" = ?[0m  [["active", 1]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "crimes" WHERE "crimes"."active" != ?[0m  [["active", 1]]
  [1m[36mCrime Load (0.1ms)[0m  [1m[34mSELECT "crimes".* FROM "crimes" WHERE "crimes"."active" != ?[0m  [["active", 1]]
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------
CrimeTest: test_: Crime should require name to be set. 
-------------------------------------------------------
  [1m[36mCrime Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE "crimes"."name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------
CrimeTest: test_: Within context should have a felonies scope. 
---------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.3ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Murder"], ["felony", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder, Second Degree"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony", "active") VALUES (?, ?, ?)[0m  [["name", "Murder, Second Degree"], ["felony", 1], ["active", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Arson"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Arson"], ["felony", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Robbery"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Robbery"], ["felony", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Trespass"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.2ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Trespass"], ["felony", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "crimes" WHERE "crimes"."felony" = ?[0m  [["felony", 1]]
  [1m[36mCrime Load (0.1ms)[0m  [1m[34mSELECT "crimes".* FROM "crimes" WHERE "crimes"."felony" = ?[0m  [["felony", 1]]
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------
CrimeTest: test_: Crime should require unique value for name. 
--------------------------------------------------------------
  [1m[36mCrime Load (0.2ms)[0m  [1m[34mSELECT  "crimes".* FROM "crimes" ORDER BY "crimes"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Create (0.3ms)[0m  [1m[32mINSERT INTO "crimes" ("name") VALUES (?)[0m  [["name", "a"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "A"], ["LIMIT", 1]]
  [1m[35m (0.9ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------
CrimeTest: test_: Within context should have a felonies scope. 
---------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.9ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Murder"], ["felony", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder, Second Degree"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony", "active") VALUES (?, ?, ?)[0m  [["name", "Murder, Second Degree"], ["felony", 1], ["active", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Arson"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Arson"], ["felony", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Robbery"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.2ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Robbery"], ["felony", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Trespass"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Trespass"], ["felony", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "crimes" WHERE "crimes"."felony" = ?[0m  [["felony", 1]]
  [1m[36mCrime Load (0.1ms)[0m  [1m[34mSELECT "crimes".* FROM "crimes" WHERE "crimes"."felony" = ?[0m  [["felony", 1]]
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------------
CrimeTest: test_: Within context should have an alphabetical scope for ordering. 
---------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.3ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Murder"], ["felony", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder, Second Degree"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony", "active") VALUES (?, ?, ?)[0m  [["name", "Murder, Second Degree"], ["felony", 1], ["active", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Arson"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Arson"], ["felony", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Robbery"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.2ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Robbery"], ["felony", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Trespass"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Trespass"], ["felony", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCrime Load (0.1ms)[0m  [1m[34mSELECT "crimes".* FROM "crimes" ORDER BY "crimes"."name" ASC[0m
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
CrimeTest: test_: Within context should have make_active and make_inactive methods. 
------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.4ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Murder"], ["felony", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder, Second Degree"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony", "active") VALUES (?, ?, ?)[0m  [["name", "Murder, Second Degree"], ["felony", 1], ["active", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Arson"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Arson"], ["felony", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Robbery"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Robbery"], ["felony", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Trespass"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Trespass"], ["felony", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) AND "crimes"."id" != ? LIMIT ?[0m  [["name", "Arson"], ["id", 3], ["LIMIT", 1]]
  [1m[36mCrime Update (0.1ms)[0m  [1m[33mUPDATE "crimes" SET "active" = ? WHERE "crimes"."id" = ?[0m  [["active", 0], ["id", 3]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCrime Load (0.1ms)[0m  [1m[34mSELECT  "crimes".* FROM "crimes" WHERE "crimes"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) AND "crimes"."id" != ? LIMIT ?[0m  [["name", "Arson"], ["id", 3], ["LIMIT", 1]]
  [1m[36mCrime Update (0.2ms)[0m  [1m[33mUPDATE "crimes" SET "active" = ? WHERE "crimes"."id" = ?[0m  [["active", 1], ["id", 3]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCrime Load (0.1ms)[0m  [1m[34mSELECT  "crimes".* FROM "crimes" WHERE "crimes"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
CrimeTest: test_: Within context should have active and inactive scopes. 
-------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.3ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Murder"], ["felony", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder, Second Degree"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony", "active") VALUES (?, ?, ?)[0m  [["name", "Murder, Second Degree"], ["felony", 1], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Arson"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Arson"], ["felony", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Robbery"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Robbery"], ["felony", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Trespass"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.2ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Trespass"], ["felony", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "crimes" WHERE "crimes"."active" = ?[0m  [["active", 1]]
  [1m[36mCrime Load (0.1ms)[0m  [1m[34mSELECT "crimes".* FROM "crimes" WHERE "crimes"."active" = ?[0m  [["active", 1]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "crimes" WHERE "crimes"."active" != ?[0m  [["active", 1]]
  [1m[36mCrime Load (0.1ms)[0m  [1m[34mSELECT "crimes".* FROM "crimes" WHERE "crimes"."active" != ?[0m  [["active", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------
CrimeTest: test_: Within context should never be destroyed. 
------------------------------------------------------------
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.4ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Murder"], ["felony", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder, Second Degree"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.2ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony", "active") VALUES (?, ?, ?)[0m  [["name", "Murder, Second Degree"], ["felony", 1], ["active", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Arson"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Arson"], ["felony", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Robbery"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Robbery"], ["felony", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Trespass"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Trespass"], ["felony", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------
CrimeTest: test_: Within context should have a misdemeanors scope. 
-------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.4ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Murder"], ["felony", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder, Second Degree"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.2ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony", "active") VALUES (?, ?, ?)[0m  [["name", "Murder, Second Degree"], ["felony", 1], ["active", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Arson"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.5ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Arson"], ["felony", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Robbery"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Robbery"], ["felony", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Trespass"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Trespass"], ["felony", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "crimes" WHERE "crimes"."felony" != ?[0m  [["felony", 1]]
  [1m[36mCrime Load (0.1ms)[0m  [1m[34mSELECT "crimes".* FROM "crimes" WHERE "crimes"."felony" != ?[0m  [["felony", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
CrimeTest: test_: Within context should have make_active and make_inactive methods. 
------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.9ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Murder"], ["felony", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder, Second Degree"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony", "active") VALUES (?, ?, ?)[0m  [["name", "Murder, Second Degree"], ["felony", 1], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Arson"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Arson"], ["felony", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Robbery"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Robbery"], ["felony", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Trespass"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Trespass"], ["felony", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) AND "crimes"."id" != ? LIMIT ?[0m  [["name", "Arson"], ["id", 3], ["LIMIT", 1]]
  [1m[36mCrime Update (0.1ms)[0m  [1m[33mUPDATE "crimes" SET "active" = ? WHERE "crimes"."id" = ?[0m  [["active", 0], ["id", 3]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCrime Load (0.1ms)[0m  [1m[34mSELECT  "crimes".* FROM "crimes" WHERE "crimes"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) AND "crimes"."id" != ? LIMIT ?[0m  [["name", "Arson"], ["id", 3], ["LIMIT", 1]]
  [1m[36mCrime Update (0.1ms)[0m  [1m[33mUPDATE "crimes" SET "active" = ? WHERE "crimes"."id" = ?[0m  [["active", 1], ["id", 3]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCrime Load (0.0ms)[0m  [1m[34mSELECT  "crimes".* FROM "crimes" WHERE "crimes"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------------
CrimeTest: test_: Within context should have an alphabetical scope for ordering. 
---------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.4ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Murder"], ["felony", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder, Second Degree"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony", "active") VALUES (?, ?, ?)[0m  [["name", "Murder, Second Degree"], ["felony", 1], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Arson"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Arson"], ["felony", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Robbery"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Robbery"], ["felony", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Trespass"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Trespass"], ["felony", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCrime Load (0.1ms)[0m  [1m[34mSELECT "crimes".* FROM "crimes" ORDER BY "crimes"."name" ASC[0m
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------
CrimeTest: test_: Within context should have a felonies scope. 
---------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.3ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Murder"], ["felony", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder, Second Degree"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony", "active") VALUES (?, ?, ?)[0m  [["name", "Murder, Second Degree"], ["felony", 1], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Arson"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Arson"], ["felony", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Robbery"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Robbery"], ["felony", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Trespass"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Trespass"], ["felony", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "crimes" WHERE "crimes"."felony" = ?[0m  [["felony", 1]]
  [1m[36mCrime Load (0.1ms)[0m  [1m[34mSELECT "crimes".* FROM "crimes" WHERE "crimes"."felony" = ?[0m  [["felony", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------
CrimeTest: test_: Within context should have a misdemeanors scope. 
-------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.4ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Murder"], ["felony", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder, Second Degree"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony", "active") VALUES (?, ?, ?)[0m  [["name", "Murder, Second Degree"], ["felony", 1], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Arson"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Arson"], ["felony", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Robbery"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Robbery"], ["felony", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Trespass"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Trespass"], ["felony", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "crimes" WHERE "crimes"."felony" != ?[0m  [["felony", 1]]
  [1m[36mCrime Load (0.1ms)[0m  [1m[34mSELECT "crimes".* FROM "crimes" WHERE "crimes"."felony" != ?[0m  [["felony", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
CrimeTest: test_: Within context should have active and inactive scopes. 
-------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.3ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Murder"], ["felony", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder, Second Degree"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony", "active") VALUES (?, ?, ?)[0m  [["name", "Murder, Second Degree"], ["felony", 1], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Arson"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Arson"], ["felony", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Robbery"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Robbery"], ["felony", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Trespass"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Trespass"], ["felony", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "crimes" WHERE "crimes"."active" = ?[0m  [["active", 1]]
  [1m[36mCrime Load (0.1ms)[0m  [1m[34mSELECT "crimes".* FROM "crimes" WHERE "crimes"."active" = ?[0m  [["active", 1]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "crimes" WHERE "crimes"."active" != ?[0m  [["active", 1]]
  [1m[36mCrime Load (0.1ms)[0m  [1m[34mSELECT "crimes".* FROM "crimes" WHERE "crimes"."active" != ?[0m  [["active", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------
CrimeTest: test_: Within context should never be destroyed. 
------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.3ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Murder"], ["felony", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder, Second Degree"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony", "active") VALUES (?, ?, ?)[0m  [["name", "Murder, Second Degree"], ["felony", 1], ["active", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Arson"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Arson"], ["felony", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Robbery"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.2ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Robbery"], ["felony", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Trespass"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Trespass"], ["felony", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------
CrimeTest: test_: Within context should never be destroyed. 
------------------------------------------------------------
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.6ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Murder"], ["felony", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder, Second Degree"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony", "active") VALUES (?, ?, ?)[0m  [["name", "Murder, Second Degree"], ["felony", 1], ["active", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Arson"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Arson"], ["felony", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Robbery"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Robbery"], ["felony", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Trespass"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Trespass"], ["felony", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
CrimeTest: test_: Within context should have active and inactive scopes. 
-------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.4ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Murder"], ["felony", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder, Second Degree"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony", "active") VALUES (?, ?, ?)[0m  [["name", "Murder, Second Degree"], ["felony", 1], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Arson"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Arson"], ["felony", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Robbery"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Robbery"], ["felony", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Trespass"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Trespass"], ["felony", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "crimes" WHERE "crimes"."active" = ?[0m  [["active", 1]]
  [1m[36mCrime Load (0.1ms)[0m  [1m[34mSELECT "crimes".* FROM "crimes" WHERE "crimes"."active" = ?[0m  [["active", 1]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "crimes" WHERE "crimes"."active" != ?[0m  [["active", 1]]
  [1m[36mCrime Load (0.1ms)[0m  [1m[34mSELECT "crimes".* FROM "crimes" WHERE "crimes"."active" != ?[0m  [["active", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
CrimeTest: test_: Within context should have make_active and make_inactive methods. 
------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.3ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Murder"], ["felony", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder, Second Degree"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony", "active") VALUES (?, ?, ?)[0m  [["name", "Murder, Second Degree"], ["felony", 1], ["active", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Arson"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Arson"], ["felony", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Robbery"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Robbery"], ["felony", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Trespass"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Trespass"], ["felony", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) AND "crimes"."id" != ? LIMIT ?[0m  [["name", "Arson"], ["id", 3], ["LIMIT", 1]]
  [1m[36mCrime Update (0.1ms)[0m  [1m[33mUPDATE "crimes" SET "active" = ? WHERE "crimes"."id" = ?[0m  [["active", 0], ["id", 3]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCrime Load (0.1ms)[0m  [1m[34mSELECT  "crimes".* FROM "crimes" WHERE "crimes"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) AND "crimes"."id" != ? LIMIT ?[0m  [["name", "Arson"], ["id", 3], ["LIMIT", 1]]
  [1m[36mCrime Update (0.1ms)[0m  [1m[33mUPDATE "crimes" SET "active" = ? WHERE "crimes"."id" = ?[0m  [["active", 1], ["id", 3]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCrime Load (0.1ms)[0m  [1m[34mSELECT  "crimes".* FROM "crimes" WHERE "crimes"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
CrimeTest: test_: Within context should have make_active and make_inactive methods. 
------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder"], ["LIMIT", 1]]
  [1m[36mCrime Create (1.0ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Murder"], ["felony", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder, Second Degree"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony", "active") VALUES (?, ?, ?)[0m  [["name", "Murder, Second Degree"], ["felony", 1], ["active", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Arson"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Arson"], ["felony", 1]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Robbery"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Robbery"], ["felony", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Trespass"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Trespass"], ["felony", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) AND "crimes"."id" != ? LIMIT ?[0m  [["name", "Arson"], ["id", 3], ["LIMIT", 1]]
  [1m[36mCrime Update (0.1ms)[0m  [1m[33mUPDATE "crimes" SET "active" = ? WHERE "crimes"."id" = ?[0m  [["active", 0], ["id", 3]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCrime Load (0.1ms)[0m  [1m[34mSELECT  "crimes".* FROM "crimes" WHERE "crimes"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) AND "crimes"."id" != ? LIMIT ?[0m  [["name", "Arson"], ["id", 3], ["LIMIT", 1]]
  [1m[36mCrime Update (0.1ms)[0m  [1m[33mUPDATE "crimes" SET "active" = ? WHERE "crimes"."id" = ?[0m  [["active", 1], ["id", 3]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCrime Load (0.0ms)[0m  [1m[34mSELECT  "crimes".* FROM "crimes" WHERE "crimes"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
CrimeTest: test_: Within context should have active and inactive scopes. 
-------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.2ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Murder"], ["felony", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder, Second Degree"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony", "active") VALUES (?, ?, ?)[0m  [["name", "Murder, Second Degree"], ["felony", 1], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Arson"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Arson"], ["felony", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Robbery"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Robbery"], ["felony", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Trespass"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Trespass"], ["felony", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "crimes" WHERE "crimes"."active" = ?[0m  [["active", 1]]
  [1m[36mCrime Load (0.1ms)[0m  [1m[34mSELECT "crimes".* FROM "crimes" WHERE "crimes"."active" = ?[0m  [["active", 1]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "crimes" WHERE "crimes"."active" != ?[0m  [["active", 1]]
  [1m[36mCrime Load (0.1ms)[0m  [1m[34mSELECT "crimes".* FROM "crimes" WHERE "crimes"."active" != ?[0m  [["active", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------
CrimeTest: test_: Within context should never be destroyed. 
------------------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.3ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Murder"], ["felony", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder, Second Degree"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony", "active") VALUES (?, ?, ?)[0m  [["name", "Murder, Second Degree"], ["felony", 1], ["active", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Arson"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Arson"], ["felony", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Robbery"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Robbery"], ["felony", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Trespass"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Trespass"], ["felony", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (1.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
CrimeTest: test_: Within context should have make_active and make_inactive methods. 
------------------------------------------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.7ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Murder"], ["felony", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder, Second Degree"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony", "active") VALUES (?, ?, ?)[0m  [["name", "Murder, Second Degree"], ["felony", 1], ["active", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Arson"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Arson"], ["felony", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Robbery"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Robbery"], ["felony", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Trespass"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Trespass"], ["felony", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) AND "crimes"."id" != ? LIMIT ?[0m  [["name", "Arson"], ["id", 3], ["LIMIT", 1]]
  [1m[36mCrime Update (0.1ms)[0m  [1m[33mUPDATE "crimes" SET "active" = ? WHERE "crimes"."id" = ?[0m  [["active", 0], ["id", 3]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCrime Load (0.1ms)[0m  [1m[34mSELECT  "crimes".* FROM "crimes" WHERE "crimes"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) AND "crimes"."id" != ? LIMIT ?[0m  [["name", "Arson"], ["id", 3], ["LIMIT", 1]]
  [1m[36mCrime Update (0.1ms)[0m  [1m[33mUPDATE "crimes" SET "active" = ? WHERE "crimes"."id" = ?[0m  [["active", 1], ["id", 3]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCrime Load (0.0ms)[0m  [1m[34mSELECT  "crimes".* FROM "crimes" WHERE "crimes"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------
CrimeTest: test_: Within context should never be destroyed. 
------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.3ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Murder"], ["felony", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder, Second Degree"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony", "active") VALUES (?, ?, ?)[0m  [["name", "Murder, Second Degree"], ["felony", 1], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Arson"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Arson"], ["felony", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Robbery"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Robbery"], ["felony", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Trespass"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Trespass"], ["felony", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
CrimeTest: test_: Within context should have active and inactive scopes. 
-------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.7ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Murder"], ["felony", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder, Second Degree"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony", "active") VALUES (?, ?, ?)[0m  [["name", "Murder, Second Degree"], ["felony", 1], ["active", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Arson"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Arson"], ["felony", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Robbery"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Robbery"], ["felony", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Trespass"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Trespass"], ["felony", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "crimes" WHERE "crimes"."active" = ?[0m  [["active", 1]]
  [1m[36mCrime Load (0.2ms)[0m  [1m[34mSELECT "crimes".* FROM "crimes" WHERE "crimes"."active" = ?[0m  [["active", 1]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "crimes" WHERE "crimes"."active" != ?[0m  [["active", 1]]
  [1m[36mCrime Load (0.1ms)[0m  [1m[34mSELECT "crimes".* FROM "crimes" WHERE "crimes"."active" != ?[0m  [["active", 1]]
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------------------------------------
OfficerTest: test_: Within context should be able destroy officers without assignments. 
----------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Major Crimes"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.4ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Major Crimes"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Headquarters"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Headquarters"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Homicide"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.2ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Homicide"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Section 31"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name", "active") VALUES (?, ?)[0m  [["name", "Section 31"], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------------------------------
OfficerTest: test_: Within context should have a for_unit scope that takes unit_id as parameter. 
-------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Major Crimes"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.3ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Major Crimes"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Headquarters"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Headquarters"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Homicide"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Homicide"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Section 31"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name", "active") VALUES (?, ?)[0m  [["name", "Section 31"], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------------------------------------------------
OfficerTest: test_: Within context should have a search scope that takes name fragment as parameter. 
-----------------------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Major Crimes"], ["LIMIT", 1]]
  [1m[36mUnit Create (1.7ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Major Crimes"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Headquarters"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Headquarters"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Homicide"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Homicide"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Section 31"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.3ms)[0m  [1m[32mINSERT INTO "units" ("name", "active") VALUES (?, ?)[0m  [["name", "Section 31"], ["active", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------
OfficerTest: test_: Officer should not allow rank to be set to "Major". 
------------------------------------------------------------------------
  [1m[36mOfficer Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "officers" WHERE "officers"."ssn" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mUnit Load (0.1ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."active" = ?[0m  [["active", 1]]
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------
OfficerTest: test_: Officer should allow rank to be set to "Detective". 
------------------------------------------------------------------------
  [1m[36mOfficer Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "officers" WHERE "officers"."ssn" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mUnit Load (0.0ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."active" = ?[0m  [["active", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------------------------------
OfficerTest: test_: Within context should require passwords to be at least four characters. 
--------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Major Crimes"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.6ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Major Crimes"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Headquarters"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Headquarters"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Homicide"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Homicide"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Section 31"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name", "active") VALUES (?, ?)[0m  [["name", "Section 31"], ["active", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------------------------
OfficerTest: test_: Officer should not allow ssn to be set to "1234567890". 
----------------------------------------------------------------------------
  [1m[36mOfficer Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "officers" WHERE "officers"."ssn" = ? LIMIT ?[0m  [["ssn", "1234567890"], ["LIMIT", 1]]
  [1m[36mUnit Load (0.0ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."active" = ?[0m  [["active", 1]]
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------
OfficerTest: test_: Officer should have many investigation_notes. 
------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------------------------------
OfficerTest: test_: Within context should return current_assignments for officer with assignments. 
---------------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Major Crimes"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.3ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Major Crimes"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Headquarters"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Headquarters"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Homicide"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Homicide"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Section 31"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name", "active") VALUES (?, ?)[0m  [["name", "Section 31"], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------
OfficerTest: test_: Officer should allow rank to be set to "Commissioner". 
---------------------------------------------------------------------------
  [1m[36mOfficer Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "officers" WHERE "officers"."ssn" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mUnit Load (0.1ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."active" = ?[0m  [["active", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------------------------
OfficerTest: test_: Within context should have role methods and recognize all three roles. 
-------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Major Crimes"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.3ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Major Crimes"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Headquarters"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Headquarters"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Homicide"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.2ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Homicide"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Section 31"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name", "active") VALUES (?, ?)[0m  [["name", "Section 31"], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------------------
OfficerTest: test_: Officer should not allow rank to be set to "bad". 
----------------------------------------------------------------------
  [1m[36mOfficer Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "officers" WHERE "officers"."ssn" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mUnit Load (0.1ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."active" = ?[0m  [["active", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------------
OfficerTest: test_: Officer should not allow ssn to be set to "12345678". 
--------------------------------------------------------------------------
  [1m[36mOfficer Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "officers" WHERE "officers"."ssn" = ? LIMIT ?[0m  [["ssn", "12345678"], ["LIMIT", 1]]
  [1m[36mUnit Load (0.1ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."active" = ?[0m  [["active", 1]]
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------------
OfficerTest: test_: Officer should require first_name to be set. 
-----------------------------------------------------------------
  [1m[36mOfficer Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "officers" WHERE "officers"."ssn" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mUnit Load (0.1ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."active" = ?[0m  [["active", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
OfficerTest: test_: Officer should belong to unit. 
---------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------
OfficerTest: test_: Officer should require unit_id to be set. 
--------------------------------------------------------------
  [1m[36mOfficer Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "officers" WHERE "officers"."ssn" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mUnit Load (0.0ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."active" = ?[0m  [["active", 1]]
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
OfficerTest: test_: Officer should allow ssn to be set to "123 45 6789". 
-------------------------------------------------------------------------
  [1m[36mOfficer Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "officers" WHERE "officers"."ssn" = ? LIMIT ?[0m  [["ssn", "123 45 6789"], ["LIMIT", 1]]
  [1m[36mUnit Load (0.1ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."active" = ?[0m  [["active", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------------------------
OfficerTest: test_: Within context should terminate assignments of inactive officers. 
--------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Major Crimes"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.3ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Major Crimes"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Headquarters"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.2ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Headquarters"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Homicide"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Homicide"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Section 31"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name", "active") VALUES (?, ?)[0m  [["name", "Section 31"], ["active", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.8ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------------
OfficerTest: test_: Within context should not be made inactive for a bad edit. 
-------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Major Crimes"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.2ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Major Crimes"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Headquarters"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Headquarters"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Homicide"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Homicide"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Section 31"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name", "active") VALUES (?, ?)[0m  [["name", "Section 31"], ["active", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------------------
OfficerTest: test_: Officer should allow rank to be set to "Sergeant". 
-----------------------------------------------------------------------
  [1m[36mOfficer Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "officers" WHERE "officers"."ssn" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mUnit Load (0.1ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."active" = ?[0m  [["active", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------
OfficerTest: test_: Within context should have active and inactive scopes. 
---------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Major Crimes"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.3ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Major Crimes"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Headquarters"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Headquarters"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Homicide"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Homicide"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Section 31"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name", "active") VALUES (?, ?)[0m  [["name", "Section 31"], ["active", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------------
OfficerTest: test_: Officer should allow rank to be set to "Detective Sergeant". 
---------------------------------------------------------------------------------
  [1m[36mOfficer Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "officers" WHERE "officers"."ssn" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mUnit Load (0.0ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."active" = ?[0m  [["active", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------
OfficerTest: test_: Officer should not allow rank to be set to "1". 
--------------------------------------------------------------------
  [1m[36mOfficer Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "officers" WHERE "officers"."ssn" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mUnit Load (0.1ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."active" = ?[0m  [["active", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------------------------------------------------------------
OfficerTest: test_: Within context should show that current_assignments for officer with no assignments is nil. 
----------------------------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Major Crimes"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.3ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Major Crimes"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Headquarters"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Headquarters"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Homicide"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Homicide"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Section 31"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name", "active") VALUES (?, ?)[0m  [["name", "Section 31"], ["active", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------------------
OfficerTest: test_: Officer should allow rank to be set to "Officer". 
----------------------------------------------------------------------
  [1m[36mOfficer Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "officers" WHERE "officers"."ssn" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mUnit Load (0.0ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."active" = ?[0m  [["active", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------------------
OfficerTest: test_: Officer should allow ssn to be set to "123456789". 
-----------------------------------------------------------------------
  [1m[36mOfficer Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "officers" WHERE "officers"."ssn" = ? LIMIT ?[0m  [["ssn", "123456789"], ["LIMIT", 1]]
  [1m[36mUnit Load (0.1ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."active" = ?[0m  [["active", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
OfficerTest: test_: Officer should allow ssn to be set to "123-45-6789". 
-------------------------------------------------------------------------
  [1m[36mOfficer Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "officers" WHERE "officers"."ssn" = ? LIMIT ?[0m  [["ssn", "123-45-6789"], ["LIMIT", 1]]
  [1m[36mUnit Load (0.1ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."active" = ?[0m  [["active", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------------
OfficerTest: test_: Within context should require passwords to be confirmed and matching. 
------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Major Crimes"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.3ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Major Crimes"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Headquarters"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Headquarters"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Homicide"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Homicide"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Section 31"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name", "active") VALUES (?, ?)[0m  [["name", "Section 31"], ["active", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------------
OfficerTest: test_: Officer should have many investigations through assignments. 
---------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------
OfficerTest: test_: Within context should have a detectives scope. 
-------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Major Crimes"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.3ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Major Crimes"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Headquarters"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Headquarters"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Homicide"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Homicide"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Section 31"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name", "active") VALUES (?, ?)[0m  [["name", "Section 31"], ["active", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------------------------------------------
OfficerTest: test_: Within context should have class method to handle authentication services. 
-----------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Major Crimes"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.2ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Major Crimes"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Headquarters"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Headquarters"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Homicide"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.4ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Homicide"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Section 31"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name", "active") VALUES (?, ?)[0m  [["name", "Section 31"], ["active", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------------------------------------------------------
OfficerTest: test_: Within context should not destroy officers with assignments but can be made inactive. 
----------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Major Crimes"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.3ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Major Crimes"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Headquarters"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Headquarters"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Homicide"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Homicide"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Section 31"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name", "active") VALUES (?, ?)[0m  [["name", "Section 31"], ["active", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------------
OfficerTest: test_: Within context should shows name as last, first name. 
--------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Major Crimes"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.5ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Major Crimes"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Headquarters"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Headquarters"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Homicide"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.0ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Homicide"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Section 31"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name", "active") VALUES (?, ?)[0m  [["name", "Section 31"], ["active", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------------------------------
OfficerTest: test_: Within context should have an alphabetical scope for ordering. 
-----------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Major Crimes"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.2ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Major Crimes"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Headquarters"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Headquarters"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Homicide"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Homicide"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Section 31"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name", "active") VALUES (?, ?)[0m  [["name", "Section 31"], ["active", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------------------------------
OfficerTest: test_: Within context should shows that Jim Gordon's ssn is stripped of non-digits. 
-------------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Major Crimes"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.3ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Major Crimes"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Headquarters"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Headquarters"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Homicide"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Homicide"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Section 31"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name", "active") VALUES (?, ?)[0m  [["name", "Section 31"], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------
OfficerTest: test_: Officer should have many assignments. 
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------------------
OfficerTest: test_: Officer should allow rank to be set to "Captain". 
----------------------------------------------------------------------
  [1m[36mOfficer Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "officers" WHERE "officers"."ssn" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mUnit Load (0.0ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."active" = ?[0m  [["active", 1]]
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------------------------------------------------
OfficerTest: test_: Within context should require users to have unique, case-insensitive usernames. 
----------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Major Crimes"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.3ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Major Crimes"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Headquarters"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Headquarters"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Homicide"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Homicide"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Section 31"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.3ms)[0m  [1m[32mINSERT INTO "units" ("name", "active") VALUES (?, ?)[0m  [["name", "Section 31"], ["active", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------------------------------------------------------------------------------------------------------
OfficerTest: test_: Officer should ensure inclusion of rank in ["Officer", "Sergeant", "Detective", "Detective Sergeant", "Lieutenant", "Captain", "Commissioner"]. 
--------------------------------------------------------------------------------------------------------------------------------------------------------------------
  [1m[36mOfficer Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "officers" WHERE "officers"."ssn" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mUnit Load (0.1ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."active" = ?[0m  [["active", 1]]
  [1m[36mOfficer Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "officers" WHERE "officers"."ssn" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mUnit Load (0.1ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."active" = ?[0m  [["active", 1]]
  [1m[36mOfficer Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "officers" WHERE "officers"."ssn" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mUnit Load (0.0ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."active" = ?[0m  [["active", 1]]
  [1m[36mOfficer Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "officers" WHERE "officers"."ssn" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mUnit Load (0.0ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."active" = ?[0m  [["active", 1]]
  [1m[36mOfficer Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "officers" WHERE "officers"."ssn" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mUnit Load (0.2ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."active" = ?[0m  [["active", 1]]
  [1m[36mOfficer Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "officers" WHERE "officers"."ssn" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mUnit Load (0.0ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."active" = ?[0m  [["active", 1]]
  [1m[36mOfficer Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "officers" WHERE "officers"."ssn" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mUnit Load (0.1ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."active" = ?[0m  [["active", 1]]
  [1m[36mOfficer Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "officers" WHERE "officers"."ssn" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mUnit Load (0.0ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."active" = ?[0m  [["active", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------------
OfficerTest: test_: Officer should not allow rank to be set to "officer". 
--------------------------------------------------------------------------
  [1m[36mOfficer Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "officers" WHERE "officers"."ssn" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mUnit Load (0.2ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."active" = ?[0m  [["active", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------------
OfficerTest: test_: Officer should require last_name to be set. 
----------------------------------------------------------------
  [1m[36mOfficer Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "officers" WHERE "officers"."ssn" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mUnit Load (0.0ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."active" = ?[0m  [["active", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------------
OfficerTest: test_: Officer should allow rank to be set to nil. 
----------------------------------------------------------------
  [1m[36mOfficer Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "officers" WHERE "officers"."ssn" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mUnit Load (0.2ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."active" = ?[0m  [["active", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------------------------
OfficerTest: test_: Within context should require a password for new users. 
----------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Major Crimes"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.3ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Major Crimes"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Headquarters"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Headquarters"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Homicide"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Homicide"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Section 31"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.2ms)[0m  [1m[32mINSERT INTO "units" ("name", "active") VALUES (?, ?)[0m  [["name", "Section 31"], ["active", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
OfficerTest: test_: Officer should allow rank to be set to "Lieutenant". 
-------------------------------------------------------------------------
  [1m[36mOfficer Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "officers" WHERE "officers"."ssn" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mUnit Load (1.0ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."active" = ?[0m  [["active", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------------------------
OfficerTest: test_: Within context should have make_active and make_inactive methods. 
--------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Major Crimes"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.2ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Major Crimes"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Headquarters"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Headquarters"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Homicide"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Homicide"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Section 31"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name", "active") VALUES (?, ?)[0m  [["name", "Section 31"], ["active", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
OfficerTest: test_: Within context should shows proper name as first and last name. 
------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Major Crimes"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.4ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Major Crimes"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Headquarters"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.2ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Headquarters"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Homicide"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Homicide"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Section 31"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name", "active") VALUES (?, ?)[0m  [["name", "Section 31"], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
OfficerTest: test_: Officer should not allow ssn to be set to "bad". 
---------------------------------------------------------------------
  [1m[36mOfficer Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "officers" WHERE "officers"."ssn" = ? LIMIT ?[0m  [["ssn", "bad"], ["LIMIT", 1]]
  [1m[36mUnit Load (0.1ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."active" = ?[0m  [["active", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------------------
OfficerTest: test_: Officer should require case sensitive unique value for ssn. 
--------------------------------------------------------------------------------
  [1m[36mOfficer Load (0.1ms)[0m  [1m[34mSELECT  "officers".* FROM "officers" ORDER BY "officers"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOfficer Create (0.4ms)[0m  [1m[32mINSERT INTO "officers" ("ssn") VALUES (?)[0m  [["ssn", ""]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOfficer Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "officers" WHERE "officers"."ssn" = ? LIMIT ?[0m  [["ssn", ""], ["LIMIT", 1]]
  [1m[36mUnit Load (0.1ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."active" = ?[0m  [["active", 1]]
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------
OfficerTest: test_: Officer should not allow ssn to be set to nil. 
-------------------------------------------------------------------
  [1m[36mOfficer Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "officers" WHERE "officers"."ssn" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mUnit Load (0.0ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."active" = ?[0m  [["active", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------------------------------------------------
OfficerTest: test_: Within context should identify placing officer in a non-active unit is invalid. 
----------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Major Crimes"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.3ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Major Crimes"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Headquarters"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Headquarters"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Homicide"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Homicide"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Section 31"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name", "active") VALUES (?, ?)[0m  [["name", "Section 31"], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------------
InvestigationTest: test_: Within context should end assignments of closed investigations. 
------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.6ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Murder"], ["felony", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder, Second Degree"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony", "active") VALUES (?, ?, ?)[0m  [["name", "Murder, Second Degree"], ["felony", 1], ["active", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Arson"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Arson"], ["felony", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Robbery"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Robbery"], ["felony", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Trespass"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Trespass"], ["felony", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvestigation Create (0.2ms)[0m  [1m[32mINSERT INTO "investigations" ("title", "description", "crime_location", "date_opened", "solved", "batman_involved") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", "Lacey Towers Murder"], ["description", "Tiffany Ambrose was murdered in Lacey Towers. Ms. Ambrose was known to be one of Roman Sionis' girlfriends. Long list of priors, but unclear if she was the primary target here or the other unidentified male found dead with her."], ["crime_location", "Lacey Towers"], ["date_opened", "2020-04-25"], ["solved", 0], ["batman_involved", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvestigation Create (0.1ms)[0m  [1m[32mINSERT INTO "investigations" ("title", "description", "crime_location", "date_opened", "date_closed", "solved", "batman_involved") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "Pussyfoot Heist"], ["description", "Theft of $1.2 million in rare jewels."], ["crime_location", "2809 West 20th Street"], ["date_opened", "2018-08-25"], ["date_closed", "2018-10-25"], ["solved", 1], ["batman_involved", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvestigation Create (0.1ms)[0m  [1m[32mINSERT INTO "investigations" ("title", "description", "crime_location", "date_opened", "solved", "batman_involved") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", "Great Gotham Harbor Arson"], ["description", "The burning of the Gotham Harbor. Over $24 million in property damage done."], ["crime_location", "Gotham Harbor"], ["date_opened", "2020-02-25"], ["solved", 0], ["batman_involved", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Load (0.2ms)[0m  [1m[34mSELECT "crimes".* FROM "crimes" WHERE "crimes"."active" = ?[0m  [["active", 1]]
  [1m[36mInvestigation Load (0.1ms)[0m  [1m[34mSELECT "investigations".* FROM "investigations"[0m
  [1m[36mCrimeInvestigation Create (0.2ms)[0m  [1m[32mINSERT INTO "crime_investigations" ("crime_id", "investigation_id") VALUES (?, ?)[0m  [["crime_id", 1], ["investigation_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvestigation Update (0.1ms)[0m  [1m[33mUPDATE "investigations" SET "date_closed" = ? WHERE "investigations"."id" = ?[0m  [["date_closed", nil], ["id", 2]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Load (0.1ms)[0m  [1m[34mSELECT "crimes".* FROM "crimes" WHERE "crimes"."active" = ?[0m  [["active", 1]]
  [1m[36mInvestigation Load (0.0ms)[0m  [1m[34mSELECT "investigations".* FROM "investigations"[0m
  [1m[36mCrimeInvestigation Create (0.1ms)[0m  [1m[32mINSERT INTO "crime_investigations" ("crime_id", "investigation_id") VALUES (?, ?)[0m  [["crime_id", 4], ["investigation_id", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Load (0.0ms)[0m  [1m[34mSELECT "crimes".* FROM "crimes" WHERE "crimes"."active" = ?[0m  [["active", 1]]
  [1m[36mInvestigation Load (0.0ms)[0m  [1m[34mSELECT "investigations".* FROM "investigations"[0m
  [1m[36mCrimeInvestigation Create (0.1ms)[0m  [1m[32mINSERT INTO "crime_investigations" ("crime_id", "investigation_id") VALUES (?, ?)[0m  [["crime_id", 5], ["investigation_id", 2]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvestigation Update (0.1ms)[0m  [1m[33mUPDATE "investigations" SET "date_closed" = ? WHERE "investigations"."id" = ?[0m  [["date_closed", "2018-10-25"], ["id", 2]]
  [1m[36mAssignment Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "assignments" WHERE "assignments"."investigation_id" = ? AND "assignments"."end_date" IS NULL LIMIT ?[0m  [["investigation_id", 2], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Load (0.1ms)[0m  [1m[34mSELECT "crimes".* FROM "crimes" WHERE "crimes"."active" = ?[0m  [["active", 1]]
  [1m[36mInvestigation Load (0.1ms)[0m  [1m[34mSELECT "investigations".* FROM "investigations"[0m
  [1m[36mCrimeInvestigation Create (0.1ms)[0m  [1m[32mINSERT INTO "crime_investigations" ("crime_id", "investigation_id") VALUES (?, ?)[0m  [["crime_id", 3], ["investigation_id", 3]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Major Crimes"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Major Crimes"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Headquarters"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Headquarters"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Homicide"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.0ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Homicide"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Section 31"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name", "active") VALUES (?, ?)[0m  [["name", "Section 31"], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------------------------------------------------
InvestigationTest: test_: Investigation should not allow date_opened to be set to Sun, 26 Apr 2020. 
----------------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------------------------------------------------------------------
InvestigationTest: test_: Within context should not end assignments of investigations are opened but have been edited. 
-----------------------------------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.3ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Murder"], ["felony", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder, Second Degree"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony", "active") VALUES (?, ?, ?)[0m  [["name", "Murder, Second Degree"], ["felony", 1], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Arson"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Arson"], ["felony", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Robbery"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Robbery"], ["felony", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Trespass"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Trespass"], ["felony", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvestigation Create (0.2ms)[0m  [1m[32mINSERT INTO "investigations" ("title", "description", "crime_location", "date_opened", "solved", "batman_involved") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", "Lacey Towers Murder"], ["description", "Tiffany Ambrose was murdered in Lacey Towers. Ms. Ambrose was known to be one of Roman Sionis' girlfriends. Long list of priors, but unclear if she was the primary target here or the other unidentified male found dead with her."], ["crime_location", "Lacey Towers"], ["date_opened", "2020-04-25"], ["solved", 0], ["batman_involved", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvestigation Create (0.1ms)[0m  [1m[32mINSERT INTO "investigations" ("title", "description", "crime_location", "date_opened", "date_closed", "solved", "batman_involved") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "Pussyfoot Heist"], ["description", "Theft of $1.2 million in rare jewels."], ["crime_location", "2809 West 20th Street"], ["date_opened", "2018-08-25"], ["date_closed", "2018-10-25"], ["solved", 1], ["batman_involved", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvestigation Create (0.1ms)[0m  [1m[32mINSERT INTO "investigations" ("title", "description", "crime_location", "date_opened", "solved", "batman_involved") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", "Great Gotham Harbor Arson"], ["description", "The burning of the Gotham Harbor. Over $24 million in property damage done."], ["crime_location", "Gotham Harbor"], ["date_opened", "2020-02-25"], ["solved", 0], ["batman_involved", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Load (0.1ms)[0m  [1m[34mSELECT "crimes".* FROM "crimes" WHERE "crimes"."active" = ?[0m  [["active", 1]]
  [1m[36mInvestigation Load (0.1ms)[0m  [1m[34mSELECT "investigations".* FROM "investigations"[0m
  [1m[36mCrimeInvestigation Create (0.2ms)[0m  [1m[32mINSERT INTO "crime_investigations" ("crime_id", "investigation_id") VALUES (?, ?)[0m  [["crime_id", 1], ["investigation_id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvestigation Update (0.1ms)[0m  [1m[33mUPDATE "investigations" SET "date_closed" = ? WHERE "investigations"."id" = ?[0m  [["date_closed", nil], ["id", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Load (0.1ms)[0m  [1m[34mSELECT "crimes".* FROM "crimes" WHERE "crimes"."active" = ?[0m  [["active", 1]]
  [1m[36mInvestigation Load (0.0ms)[0m  [1m[34mSELECT "investigations".* FROM "investigations"[0m
  [1m[36mCrimeInvestigation Create (0.1ms)[0m  [1m[32mINSERT INTO "crime_investigations" ("crime_id", "investigation_id") VALUES (?, ?)[0m  [["crime_id", 4], ["investigation_id", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Load (0.1ms)[0m  [1m[34mSELECT "crimes".* FROM "crimes" WHERE "crimes"."active" = ?[0m  [["active", 1]]
  [1m[36mInvestigation Load (0.1ms)[0m  [1m[34mSELECT "investigations".* FROM "investigations"[0m
  [1m[36mCrimeInvestigation Create (0.9ms)[0m  [1m[32mINSERT INTO "crime_investigations" ("crime_id", "investigation_id") VALUES (?, ?)[0m  [["crime_id", 5], ["investigation_id", 2]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvestigation Update (0.1ms)[0m  [1m[33mUPDATE "investigations" SET "date_closed" = ? WHERE "investigations"."id" = ?[0m  [["date_closed", "2018-10-25"], ["id", 2]]
  [1m[36mAssignment Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "assignments" WHERE "assignments"."investigation_id" = ? AND "assignments"."end_date" IS NULL LIMIT ?[0m  [["investigation_id", 2], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Load (0.0ms)[0m  [1m[34mSELECT "crimes".* FROM "crimes" WHERE "crimes"."active" = ?[0m  [["active", 1]]
  [1m[36mInvestigation Load (0.1ms)[0m  [1m[34mSELECT "investigations".* FROM "investigations"[0m
  [1m[36mCrimeInvestigation Create (0.1ms)[0m  [1m[32mINSERT INTO "crime_investigations" ("crime_id", "investigation_id") VALUES (?, ?)[0m  [["crime_id", 3], ["investigation_id", 3]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Major Crimes"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Major Crimes"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Headquarters"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Headquarters"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Homicide"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Homicide"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Section 31"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name", "active") VALUES (?, ?)[0m  [["name", "Section 31"], ["active", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------------------
InvestigationTest: test_: Investigation should have many officers through assignments. 
---------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------------
InvestigationTest: test_: Within context should have an is_open scope to find open cases. 
------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.3ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Murder"], ["felony", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder, Second Degree"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony", "active") VALUES (?, ?, ?)[0m  [["name", "Murder, Second Degree"], ["felony", 1], ["active", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Arson"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Arson"], ["felony", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Robbery"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Robbery"], ["felony", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Trespass"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Trespass"], ["felony", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvestigation Create (0.1ms)[0m  [1m[32mINSERT INTO "investigations" ("title", "description", "crime_location", "date_opened", "solved", "batman_involved") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", "Lacey Towers Murder"], ["description", "Tiffany Ambrose was murdered in Lacey Towers. Ms. Ambrose was known to be one of Roman Sionis' girlfriends. Long list of priors, but unclear if she was the primary target here or the other unidentified male found dead with her."], ["crime_location", "Lacey Towers"], ["date_opened", "2020-04-25"], ["solved", 0], ["batman_involved", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvestigation Create (0.1ms)[0m  [1m[32mINSERT INTO "investigations" ("title", "description", "crime_location", "date_opened", "date_closed", "solved", "batman_involved") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "Pussyfoot Heist"], ["description", "Theft of $1.2 million in rare jewels."], ["crime_location", "2809 West 20th Street"], ["date_opened", "2018-08-25"], ["date_closed", "2018-10-25"], ["solved", 1], ["batman_involved", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvestigation Create (0.5ms)[0m  [1m[32mINSERT INTO "investigations" ("title", "description", "crime_location", "date_opened", "solved", "batman_involved") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", "Great Gotham Harbor Arson"], ["description", "The burning of the Gotham Harbor. Over $24 million in property damage done."], ["crime_location", "Gotham Harbor"], ["date_opened", "2020-02-25"], ["solved", 0], ["batman_involved", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Load (0.1ms)[0m  [1m[34mSELECT "crimes".* FROM "crimes" WHERE "crimes"."active" = ?[0m  [["active", 1]]
  [1m[36mInvestigation Load (0.0ms)[0m  [1m[34mSELECT "investigations".* FROM "investigations"[0m
  [1m[36mCrimeInvestigation Create (0.2ms)[0m  [1m[32mINSERT INTO "crime_investigations" ("crime_id", "investigation_id") VALUES (?, ?)[0m  [["crime_id", 1], ["investigation_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvestigation Update (0.1ms)[0m  [1m[33mUPDATE "investigations" SET "date_closed" = ? WHERE "investigations"."id" = ?[0m  [["date_closed", nil], ["id", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Load (0.1ms)[0m  [1m[34mSELECT "crimes".* FROM "crimes" WHERE "crimes"."active" = ?[0m  [["active", 1]]
  [1m[36mInvestigation Load (0.0ms)[0m  [1m[34mSELECT "investigations".* FROM "investigations"[0m
  [1m[36mCrimeInvestigation Create (0.1ms)[0m  [1m[32mINSERT INTO "crime_investigations" ("crime_id", "investigation_id") VALUES (?, ?)[0m  [["crime_id", 4], ["investigation_id", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Load (0.0ms)[0m  [1m[34mSELECT "crimes".* FROM "crimes" WHERE "crimes"."active" = ?[0m  [["active", 1]]
  [1m[36mInvestigation Load (0.0ms)[0m  [1m[34mSELECT "investigations".* FROM "investigations"[0m
  [1m[36mCrimeInvestigation Create (0.1ms)[0m  [1m[32mINSERT INTO "crime_investigations" ("crime_id", "investigation_id") VALUES (?, ?)[0m  [["crime_id", 5], ["investigation_id", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvestigation Update (0.1ms)[0m  [1m[33mUPDATE "investigations" SET "date_closed" = ? WHERE "investigations"."id" = ?[0m  [["date_closed", "2018-10-25"], ["id", 2]]
  [1m[36mAssignment Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "assignments" WHERE "assignments"."investigation_id" = ? AND "assignments"."end_date" IS NULL LIMIT ?[0m  [["investigation_id", 2], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Load (0.1ms)[0m  [1m[34mSELECT "crimes".* FROM "crimes" WHERE "crimes"."active" = ?[0m  [["active", 1]]
  [1m[36mInvestigation Load (0.0ms)[0m  [1m[34mSELECT "investigations".* FROM "investigations"[0m
  [1m[36mCrimeInvestigation Create (0.1ms)[0m  [1m[32mINSERT INTO "crime_investigations" ("crime_id", "investigation_id") VALUES (?, ?)[0m  [["crime_id", 3], ["investigation_id", 3]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvestigation Load (0.1ms)[0m  [1m[34mSELECT "investigations".* FROM "investigations" WHERE "investigations"."date_closed" IS NULL[0m
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------------------
InvestigationTest: test_: Investigation should have many assignments. 
----------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------------------------------------------
InvestigationTest: test_: Within context should have an was_solved scope to find solved cases. 
-----------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.2ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Murder"], ["felony", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder, Second Degree"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony", "active") VALUES (?, ?, ?)[0m  [["name", "Murder, Second Degree"], ["felony", 1], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Arson"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Arson"], ["felony", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Robbery"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Robbery"], ["felony", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Trespass"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.2ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Trespass"], ["felony", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvestigation Create (0.1ms)[0m  [1m[32mINSERT INTO "investigations" ("title", "description", "crime_location", "date_opened", "solved", "batman_involved") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", "Lacey Towers Murder"], ["description", "Tiffany Ambrose was murdered in Lacey Towers. Ms. Ambrose was known to be one of Roman Sionis' girlfriends. Long list of priors, but unclear if she was the primary target here or the other unidentified male found dead with her."], ["crime_location", "Lacey Towers"], ["date_opened", "2020-04-25"], ["solved", 0], ["batman_involved", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvestigation Create (0.1ms)[0m  [1m[32mINSERT INTO "investigations" ("title", "description", "crime_location", "date_opened", "date_closed", "solved", "batman_involved") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "Pussyfoot Heist"], ["description", "Theft of $1.2 million in rare jewels."], ["crime_location", "2809 West 20th Street"], ["date_opened", "2018-08-25"], ["date_closed", "2018-10-25"], ["solved", 1], ["batman_involved", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvestigation Create (0.1ms)[0m  [1m[32mINSERT INTO "investigations" ("title", "description", "crime_location", "date_opened", "solved", "batman_involved") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", "Great Gotham Harbor Arson"], ["description", "The burning of the Gotham Harbor. Over $24 million in property damage done."], ["crime_location", "Gotham Harbor"], ["date_opened", "2020-02-25"], ["solved", 0], ["batman_involved", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Load (0.1ms)[0m  [1m[34mSELECT "crimes".* FROM "crimes" WHERE "crimes"."active" = ?[0m  [["active", 1]]
  [1m[36mInvestigation Load (0.1ms)[0m  [1m[34mSELECT "investigations".* FROM "investigations"[0m
  [1m[36mCrimeInvestigation Create (0.2ms)[0m  [1m[32mINSERT INTO "crime_investigations" ("crime_id", "investigation_id") VALUES (?, ?)[0m  [["crime_id", 1], ["investigation_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvestigation Update (0.1ms)[0m  [1m[33mUPDATE "investigations" SET "date_closed" = ? WHERE "investigations"."id" = ?[0m  [["date_closed", nil], ["id", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Load (0.1ms)[0m  [1m[34mSELECT "crimes".* FROM "crimes" WHERE "crimes"."active" = ?[0m  [["active", 1]]
  [1m[36mInvestigation Load (0.0ms)[0m  [1m[34mSELECT "investigations".* FROM "investigations"[0m
  [1m[36mCrimeInvestigation Create (0.1ms)[0m  [1m[32mINSERT INTO "crime_investigations" ("crime_id", "investigation_id") VALUES (?, ?)[0m  [["crime_id", 4], ["investigation_id", 2]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Load (0.1ms)[0m  [1m[34mSELECT "crimes".* FROM "crimes" WHERE "crimes"."active" = ?[0m  [["active", 1]]
  [1m[36mInvestigation Load (0.0ms)[0m  [1m[34mSELECT "investigations".* FROM "investigations"[0m
  [1m[36mCrimeInvestigation Create (0.1ms)[0m  [1m[32mINSERT INTO "crime_investigations" ("crime_id", "investigation_id") VALUES (?, ?)[0m  [["crime_id", 5], ["investigation_id", 2]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvestigation Update (0.1ms)[0m  [1m[33mUPDATE "investigations" SET "date_closed" = ? WHERE "investigations"."id" = ?[0m  [["date_closed", "2018-10-25"], ["id", 2]]
  [1m[36mAssignment Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "assignments" WHERE "assignments"."investigation_id" = ? AND "assignments"."end_date" IS NULL LIMIT ?[0m  [["investigation_id", 2], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Load (0.1ms)[0m  [1m[34mSELECT "crimes".* FROM "crimes" WHERE "crimes"."active" = ?[0m  [["active", 1]]
  [1m[36mInvestigation Load (0.0ms)[0m  [1m[34mSELECT "investigations".* FROM "investigations"[0m
  [1m[36mCrimeInvestigation Create (0.1ms)[0m  [1m[32mINSERT INTO "crime_investigations" ("crime_id", "investigation_id") VALUES (?, ?)[0m  [["crime_id", 3], ["investigation_id", 3]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvestigation Load (0.1ms)[0m  [1m[34mSELECT "investigations".* FROM "investigations" WHERE "investigations"."solved" = ?[0m  [["solved", 1]]
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------------------------------------
InvestigationTest: test_: Within context should have an alphabetical scope for ordering. 
-----------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.3ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Murder"], ["felony", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder, Second Degree"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony", "active") VALUES (?, ?, ?)[0m  [["name", "Murder, Second Degree"], ["felony", 1], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Arson"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Arson"], ["felony", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Robbery"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Robbery"], ["felony", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Trespass"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Trespass"], ["felony", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvestigation Create (0.2ms)[0m  [1m[32mINSERT INTO "investigations" ("title", "description", "crime_location", "date_opened", "solved", "batman_involved") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", "Lacey Towers Murder"], ["description", "Tiffany Ambrose was murdered in Lacey Towers. Ms. Ambrose was known to be one of Roman Sionis' girlfriends. Long list of priors, but unclear if she was the primary target here or the other unidentified male found dead with her."], ["crime_location", "Lacey Towers"], ["date_opened", "2020-04-25"], ["solved", 0], ["batman_involved", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvestigation Create (0.1ms)[0m  [1m[32mINSERT INTO "investigations" ("title", "description", "crime_location", "date_opened", "date_closed", "solved", "batman_involved") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "Pussyfoot Heist"], ["description", "Theft of $1.2 million in rare jewels."], ["crime_location", "2809 West 20th Street"], ["date_opened", "2018-08-25"], ["date_closed", "2018-10-25"], ["solved", 1], ["batman_involved", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvestigation Create (0.1ms)[0m  [1m[32mINSERT INTO "investigations" ("title", "description", "crime_location", "date_opened", "solved", "batman_involved") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", "Great Gotham Harbor Arson"], ["description", "The burning of the Gotham Harbor. Over $24 million in property damage done."], ["crime_location", "Gotham Harbor"], ["date_opened", "2020-02-25"], ["solved", 0], ["batman_involved", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Load (0.1ms)[0m  [1m[34mSELECT "crimes".* FROM "crimes" WHERE "crimes"."active" = ?[0m  [["active", 1]]
  [1m[36mInvestigation Load (0.1ms)[0m  [1m[34mSELECT "investigations".* FROM "investigations"[0m
  [1m[36mCrimeInvestigation Create (0.3ms)[0m  [1m[32mINSERT INTO "crime_investigations" ("crime_id", "investigation_id") VALUES (?, ?)[0m  [["crime_id", 1], ["investigation_id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvestigation Update (0.1ms)[0m  [1m[33mUPDATE "investigations" SET "date_closed" = ? WHERE "investigations"."id" = ?[0m  [["date_closed", nil], ["id", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Load (0.0ms)[0m  [1m[34mSELECT "crimes".* FROM "crimes" WHERE "crimes"."active" = ?[0m  [["active", 1]]
  [1m[36mInvestigation Load (0.1ms)[0m  [1m[34mSELECT "investigations".* FROM "investigations"[0m
  [1m[36mCrimeInvestigation Create (0.1ms)[0m  [1m[32mINSERT INTO "crime_investigations" ("crime_id", "investigation_id") VALUES (?, ?)[0m  [["crime_id", 4], ["investigation_id", 2]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Load (0.2ms)[0m  [1m[34mSELECT "crimes".* FROM "crimes" WHERE "crimes"."active" = ?[0m  [["active", 1]]
  [1m[36mInvestigation Load (0.1ms)[0m  [1m[34mSELECT "investigations".* FROM "investigations"[0m
  [1m[36mCrimeInvestigation Create (0.1ms)[0m  [1m[32mINSERT INTO "crime_investigations" ("crime_id", "investigation_id") VALUES (?, ?)[0m  [["crime_id", 5], ["investigation_id", 2]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvestigation Update (0.1ms)[0m  [1m[33mUPDATE "investigations" SET "date_closed" = ? WHERE "investigations"."id" = ?[0m  [["date_closed", "2018-10-25"], ["id", 2]]
  [1m[36mAssignment Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "assignments" WHERE "assignments"."investigation_id" = ? AND "assignments"."end_date" IS NULL LIMIT ?[0m  [["investigation_id", 2], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Load (0.0ms)[0m  [1m[34mSELECT "crimes".* FROM "crimes" WHERE "crimes"."active" = ?[0m  [["active", 1]]
  [1m[36mInvestigation Load (0.0ms)[0m  [1m[34mSELECT "investigations".* FROM "investigations"[0m
  [1m[36mCrimeInvestigation Create (0.1ms)[0m  [1m[32mINSERT INTO "crime_investigations" ("crime_id", "investigation_id") VALUES (?, ?)[0m  [["crime_id", 3], ["investigation_id", 3]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvestigation Load (0.1ms)[0m  [1m[34mSELECT "investigations".* FROM "investigations" ORDER BY "investigations"."title" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------------------------------------------
InvestigationTest: test_: Within context should have an is_closed scope to find closed cases. 
----------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.3ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Murder"], ["felony", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder, Second Degree"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony", "active") VALUES (?, ?, ?)[0m  [["name", "Murder, Second Degree"], ["felony", 1], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Arson"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Arson"], ["felony", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Robbery"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Robbery"], ["felony", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Trespass"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Trespass"], ["felony", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvestigation Create (0.5ms)[0m  [1m[32mINSERT INTO "investigations" ("title", "description", "crime_location", "date_opened", "solved", "batman_involved") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", "Lacey Towers Murder"], ["description", "Tiffany Ambrose was murdered in Lacey Towers. Ms. Ambrose was known to be one of Roman Sionis' girlfriends. Long list of priors, but unclear if she was the primary target here or the other unidentified male found dead with her."], ["crime_location", "Lacey Towers"], ["date_opened", "2020-04-25"], ["solved", 0], ["batman_involved", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvestigation Create (0.1ms)[0m  [1m[32mINSERT INTO "investigations" ("title", "description", "crime_location", "date_opened", "date_closed", "solved", "batman_involved") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "Pussyfoot Heist"], ["description", "Theft of $1.2 million in rare jewels."], ["crime_location", "2809 West 20th Street"], ["date_opened", "2018-08-25"], ["date_closed", "2018-10-25"], ["solved", 1], ["batman_involved", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvestigation Create (0.1ms)[0m  [1m[32mINSERT INTO "investigations" ("title", "description", "crime_location", "date_opened", "solved", "batman_involved") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", "Great Gotham Harbor Arson"], ["description", "The burning of the Gotham Harbor. Over $24 million in property damage done."], ["crime_location", "Gotham Harbor"], ["date_opened", "2020-02-25"], ["solved", 0], ["batman_involved", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Load (0.0ms)[0m  [1m[34mSELECT "crimes".* FROM "crimes" WHERE "crimes"."active" = ?[0m  [["active", 1]]
  [1m[36mInvestigation Load (0.0ms)[0m  [1m[34mSELECT "investigations".* FROM "investigations"[0m
  [1m[36mCrimeInvestigation Create (0.6ms)[0m  [1m[32mINSERT INTO "crime_investigations" ("crime_id", "investigation_id") VALUES (?, ?)[0m  [["crime_id", 1], ["investigation_id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvestigation Update (0.1ms)[0m  [1m[33mUPDATE "investigations" SET "date_closed" = ? WHERE "investigations"."id" = ?[0m  [["date_closed", nil], ["id", 2]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Load (0.1ms)[0m  [1m[34mSELECT "crimes".* FROM "crimes" WHERE "crimes"."active" = ?[0m  [["active", 1]]
  [1m[36mInvestigation Load (0.2ms)[0m  [1m[34mSELECT "investigations".* FROM "investigations"[0m
  [1m[36mCrimeInvestigation Create (0.1ms)[0m  [1m[32mINSERT INTO "crime_investigations" ("crime_id", "investigation_id") VALUES (?, ?)[0m  [["crime_id", 4], ["investigation_id", 2]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Load (0.1ms)[0m  [1m[34mSELECT "crimes".* FROM "crimes" WHERE "crimes"."active" = ?[0m  [["active", 1]]
  [1m[36mInvestigation Load (0.1ms)[0m  [1m[34mSELECT "investigations".* FROM "investigations"[0m
  [1m[36mCrimeInvestigation Create (0.1ms)[0m  [1m[32mINSERT INTO "crime_investigations" ("crime_id", "investigation_id") VALUES (?, ?)[0m  [["crime_id", 5], ["investigation_id", 2]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvestigation Update (0.1ms)[0m  [1m[33mUPDATE "investigations" SET "date_closed" = ? WHERE "investigations"."id" = ?[0m  [["date_closed", "2018-10-25"], ["id", 2]]
  [1m[36mAssignment Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "assignments" WHERE "assignments"."investigation_id" = ? AND "assignments"."end_date" IS NULL LIMIT ?[0m  [["investigation_id", 2], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Load (0.0ms)[0m  [1m[34mSELECT "crimes".* FROM "crimes" WHERE "crimes"."active" = ?[0m  [["active", 1]]
  [1m[36mInvestigation Load (0.0ms)[0m  [1m[34mSELECT "investigations".* FROM "investigations"[0m
  [1m[36mCrimeInvestigation Create (0.1ms)[0m  [1m[32mINSERT INTO "crime_investigations" ("crime_id", "investigation_id") VALUES (?, ?)[0m  [["crime_id", 3], ["investigation_id", 3]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvestigation Load (0.1ms)[0m  [1m[34mSELECT "investigations".* FROM "investigations" WHERE "investigations"."date_closed" IS NOT NULL[0m
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------
InvestigationTest: test_: Within context should never be destroyed. 
--------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.3ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Murder"], ["felony", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder, Second Degree"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony", "active") VALUES (?, ?, ?)[0m  [["name", "Murder, Second Degree"], ["felony", 1], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Arson"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Arson"], ["felony", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Robbery"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Robbery"], ["felony", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Trespass"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Trespass"], ["felony", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvestigation Create (0.4ms)[0m  [1m[32mINSERT INTO "investigations" ("title", "description", "crime_location", "date_opened", "solved", "batman_involved") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", "Lacey Towers Murder"], ["description", "Tiffany Ambrose was murdered in Lacey Towers. Ms. Ambrose was known to be one of Roman Sionis' girlfriends. Long list of priors, but unclear if she was the primary target here or the other unidentified male found dead with her."], ["crime_location", "Lacey Towers"], ["date_opened", "2020-04-25"], ["solved", 0], ["batman_involved", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvestigation Create (0.1ms)[0m  [1m[32mINSERT INTO "investigations" ("title", "description", "crime_location", "date_opened", "date_closed", "solved", "batman_involved") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "Pussyfoot Heist"], ["description", "Theft of $1.2 million in rare jewels."], ["crime_location", "2809 West 20th Street"], ["date_opened", "2018-08-25"], ["date_closed", "2018-10-25"], ["solved", 1], ["batman_involved", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvestigation Create (0.1ms)[0m  [1m[32mINSERT INTO "investigations" ("title", "description", "crime_location", "date_opened", "solved", "batman_involved") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", "Great Gotham Harbor Arson"], ["description", "The burning of the Gotham Harbor. Over $24 million in property damage done."], ["crime_location", "Gotham Harbor"], ["date_opened", "2020-02-25"], ["solved", 0], ["batman_involved", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Load (0.1ms)[0m  [1m[34mSELECT "crimes".* FROM "crimes" WHERE "crimes"."active" = ?[0m  [["active", 1]]
  [1m[36mInvestigation Load (0.1ms)[0m  [1m[34mSELECT "investigations".* FROM "investigations"[0m
  [1m[36mCrimeInvestigation Create (0.4ms)[0m  [1m[32mINSERT INTO "crime_investigations" ("crime_id", "investigation_id") VALUES (?, ?)[0m  [["crime_id", 1], ["investigation_id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvestigation Update (0.1ms)[0m  [1m[33mUPDATE "investigations" SET "date_closed" = ? WHERE "investigations"."id" = ?[0m  [["date_closed", nil], ["id", 2]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Load (0.1ms)[0m  [1m[34mSELECT "crimes".* FROM "crimes" WHERE "crimes"."active" = ?[0m  [["active", 1]]
  [1m[36mInvestigation Load (0.1ms)[0m  [1m[34mSELECT "investigations".* FROM "investigations"[0m
  [1m[36mCrimeInvestigation Create (0.1ms)[0m  [1m[32mINSERT INTO "crime_investigations" ("crime_id", "investigation_id") VALUES (?, ?)[0m  [["crime_id", 4], ["investigation_id", 2]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Load (0.1ms)[0m  [1m[34mSELECT "crimes".* FROM "crimes" WHERE "crimes"."active" = ?[0m  [["active", 1]]
  [1m[36mInvestigation Load (0.1ms)[0m  [1m[34mSELECT "investigations".* FROM "investigations"[0m
  [1m[36mCrimeInvestigation Create (0.1ms)[0m  [1m[32mINSERT INTO "crime_investigations" ("crime_id", "investigation_id") VALUES (?, ?)[0m  [["crime_id", 5], ["investigation_id", 2]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvestigation Update (0.1ms)[0m  [1m[33mUPDATE "investigations" SET "date_closed" = ? WHERE "investigations"."id" = ?[0m  [["date_closed", "2018-10-25"], ["id", 2]]
  [1m[36mAssignment Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "assignments" WHERE "assignments"."investigation_id" = ? AND "assignments"."end_date" IS NULL LIMIT ?[0m  [["investigation_id", 2], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Load (0.0ms)[0m  [1m[34mSELECT "crimes".* FROM "crimes" WHERE "crimes"."active" = ?[0m  [["active", 1]]
  [1m[36mInvestigation Load (0.0ms)[0m  [1m[34mSELECT "investigations".* FROM "investigations"[0m
  [1m[36mCrimeInvestigation Create (0.1ms)[0m  [1m[32mINSERT INTO "crime_investigations" ("crime_id", "investigation_id") VALUES (?, ?)[0m  [["crime_id", 3], ["investigation_id", 3]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------------------------------------------
InvestigationTest: test_: Investigation should have many crimes through crime_investigations. 
----------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------------------------------------
InvestigationTest: test_: Within context should validate date closed cannot precede date opened but can equal it. 
------------------------------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.2ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Murder"], ["felony", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder, Second Degree"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony", "active") VALUES (?, ?, ?)[0m  [["name", "Murder, Second Degree"], ["felony", 1], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Arson"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Arson"], ["felony", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Robbery"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Robbery"], ["felony", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Trespass"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Trespass"], ["felony", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvestigation Create (0.1ms)[0m  [1m[32mINSERT INTO "investigations" ("title", "description", "crime_location", "date_opened", "solved", "batman_involved") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", "Lacey Towers Murder"], ["description", "Tiffany Ambrose was murdered in Lacey Towers. Ms. Ambrose was known to be one of Roman Sionis' girlfriends. Long list of priors, but unclear if she was the primary target here or the other unidentified male found dead with her."], ["crime_location", "Lacey Towers"], ["date_opened", "2020-04-25"], ["solved", 0], ["batman_involved", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvestigation Create (0.1ms)[0m  [1m[32mINSERT INTO "investigations" ("title", "description", "crime_location", "date_opened", "date_closed", "solved", "batman_involved") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "Pussyfoot Heist"], ["description", "Theft of $1.2 million in rare jewels."], ["crime_location", "2809 West 20th Street"], ["date_opened", "2018-08-25"], ["date_closed", "2018-10-25"], ["solved", 1], ["batman_involved", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvestigation Create (0.1ms)[0m  [1m[32mINSERT INTO "investigations" ("title", "description", "crime_location", "date_opened", "solved", "batman_involved") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", "Great Gotham Harbor Arson"], ["description", "The burning of the Gotham Harbor. Over $24 million in property damage done."], ["crime_location", "Gotham Harbor"], ["date_opened", "2020-02-25"], ["solved", 0], ["batman_involved", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Load (0.1ms)[0m  [1m[34mSELECT "crimes".* FROM "crimes" WHERE "crimes"."active" = ?[0m  [["active", 1]]
  [1m[36mInvestigation Load (0.1ms)[0m  [1m[34mSELECT "investigations".* FROM "investigations"[0m
  [1m[36mCrimeInvestigation Create (0.2ms)[0m  [1m[32mINSERT INTO "crime_investigations" ("crime_id", "investigation_id") VALUES (?, ?)[0m  [["crime_id", 1], ["investigation_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvestigation Update (0.1ms)[0m  [1m[33mUPDATE "investigations" SET "date_closed" = ? WHERE "investigations"."id" = ?[0m  [["date_closed", nil], ["id", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Load (0.0ms)[0m  [1m[34mSELECT "crimes".* FROM "crimes" WHERE "crimes"."active" = ?[0m  [["active", 1]]
  [1m[36mInvestigation Load (0.0ms)[0m  [1m[34mSELECT "investigations".* FROM "investigations"[0m
  [1m[36mCrimeInvestigation Create (0.1ms)[0m  [1m[32mINSERT INTO "crime_investigations" ("crime_id", "investigation_id") VALUES (?, ?)[0m  [["crime_id", 4], ["investigation_id", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Load (0.1ms)[0m  [1m[34mSELECT "crimes".* FROM "crimes" WHERE "crimes"."active" = ?[0m  [["active", 1]]
  [1m[36mInvestigation Load (0.1ms)[0m  [1m[34mSELECT "investigations".* FROM "investigations"[0m
  [1m[36mCrimeInvestigation Create (0.1ms)[0m  [1m[32mINSERT INTO "crime_investigations" ("crime_id", "investigation_id") VALUES (?, ?)[0m  [["crime_id", 5], ["investigation_id", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvestigation Update (0.1ms)[0m  [1m[33mUPDATE "investigations" SET "date_closed" = ? WHERE "investigations"."id" = ?[0m  [["date_closed", "2018-10-25"], ["id", 2]]
  [1m[36mAssignment Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "assignments" WHERE "assignments"."investigation_id" = ? AND "assignments"."end_date" IS NULL LIMIT ?[0m  [["investigation_id", 2], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Load (0.0ms)[0m  [1m[34mSELECT "crimes".* FROM "crimes" WHERE "crimes"."active" = ?[0m  [["active", 1]]
  [1m[36mInvestigation Load (0.0ms)[0m  [1m[34mSELECT "investigations".* FROM "investigations"[0m
  [1m[36mCrimeInvestigation Create (0.1ms)[0m  [1m[32mINSERT INTO "crime_investigations" ("crime_id", "investigation_id") VALUES (?, ?)[0m  [["crime_id", 3], ["investigation_id", 3]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------------------
InvestigationTest: test_: Investigation should not allow date_opened to be set to nil. 
---------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------------------
InvestigationTest: test_: Investigation should allow date_opened to be set to Fri, 24 Apr 2020. 
------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------------------------------------------------------------------
InvestigationTest: test_: Within context should have an open_on_date scope to find open cases for a particular day in the past. 
--------------------------------------------------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.4ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Murder"], ["felony", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder, Second Degree"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony", "active") VALUES (?, ?, ?)[0m  [["name", "Murder, Second Degree"], ["felony", 1], ["active", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Arson"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Arson"], ["felony", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Robbery"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Robbery"], ["felony", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Trespass"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Trespass"], ["felony", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvestigation Create (0.1ms)[0m  [1m[32mINSERT INTO "investigations" ("title", "description", "crime_location", "date_opened", "solved", "batman_involved") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", "Lacey Towers Murder"], ["description", "Tiffany Ambrose was murdered in Lacey Towers. Ms. Ambrose was known to be one of Roman Sionis' girlfriends. Long list of priors, but unclear if she was the primary target here or the other unidentified male found dead with her."], ["crime_location", "Lacey Towers"], ["date_opened", "2020-04-25"], ["solved", 0], ["batman_involved", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvestigation Create (0.1ms)[0m  [1m[32mINSERT INTO "investigations" ("title", "description", "crime_location", "date_opened", "date_closed", "solved", "batman_involved") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "Pussyfoot Heist"], ["description", "Theft of $1.2 million in rare jewels."], ["crime_location", "2809 West 20th Street"], ["date_opened", "2018-08-25"], ["date_closed", "2018-10-25"], ["solved", 1], ["batman_involved", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvestigation Create (0.1ms)[0m  [1m[32mINSERT INTO "investigations" ("title", "description", "crime_location", "date_opened", "solved", "batman_involved") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", "Great Gotham Harbor Arson"], ["description", "The burning of the Gotham Harbor. Over $24 million in property damage done."], ["crime_location", "Gotham Harbor"], ["date_opened", "2020-02-25"], ["solved", 0], ["batman_involved", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Load (0.0ms)[0m  [1m[34mSELECT "crimes".* FROM "crimes" WHERE "crimes"."active" = ?[0m  [["active", 1]]
  [1m[36mInvestigation Load (0.0ms)[0m  [1m[34mSELECT "investigations".* FROM "investigations"[0m
  [1m[36mCrimeInvestigation Create (0.1ms)[0m  [1m[32mINSERT INTO "crime_investigations" ("crime_id", "investigation_id") VALUES (?, ?)[0m  [["crime_id", 1], ["investigation_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvestigation Update (0.1ms)[0m  [1m[33mUPDATE "investigations" SET "date_closed" = ? WHERE "investigations"."id" = ?[0m  [["date_closed", nil], ["id", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Load (0.1ms)[0m  [1m[34mSELECT "crimes".* FROM "crimes" WHERE "crimes"."active" = ?[0m  [["active", 1]]
  [1m[36mInvestigation Load (0.0ms)[0m  [1m[34mSELECT "investigations".* FROM "investigations"[0m
  [1m[36mCrimeInvestigation Create (0.1ms)[0m  [1m[32mINSERT INTO "crime_investigations" ("crime_id", "investigation_id") VALUES (?, ?)[0m  [["crime_id", 4], ["investigation_id", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Load (0.1ms)[0m  [1m[34mSELECT "crimes".* FROM "crimes" WHERE "crimes"."active" = ?[0m  [["active", 1]]
  [1m[36mInvestigation Load (0.0ms)[0m  [1m[34mSELECT "investigations".* FROM "investigations"[0m
  [1m[36mCrimeInvestigation Create (0.1ms)[0m  [1m[32mINSERT INTO "crime_investigations" ("crime_id", "investigation_id") VALUES (?, ?)[0m  [["crime_id", 5], ["investigation_id", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvestigation Update (0.1ms)[0m  [1m[33mUPDATE "investigations" SET "date_closed" = ? WHERE "investigations"."id" = ?[0m  [["date_closed", "2018-10-25"], ["id", 2]]
  [1m[36mAssignment Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "assignments" WHERE "assignments"."investigation_id" = ? AND "assignments"."end_date" IS NULL LIMIT ?[0m  [["investigation_id", 2], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Load (0.0ms)[0m  [1m[34mSELECT "crimes".* FROM "crimes" WHERE "crimes"."active" = ?[0m  [["active", 1]]
  [1m[36mInvestigation Load (0.0ms)[0m  [1m[34mSELECT "investigations".* FROM "investigations"[0m
  [1m[36mCrimeInvestigation Create (0.1ms)[0m  [1m[32mINSERT INTO "crime_investigations" ("crime_id", "investigation_id") VALUES (?, ?)[0m  [["crime_id", 3], ["investigation_id", 3]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvestigation Load (0.1ms)[0m  [1m[34mSELECT "investigations".* FROM "investigations" WHERE (date_opened <= '2020-04-11 10:59:11.303332' AND (date_closed > '2020-04-11 10:59:11.303332' OR date_closed IS NULL))[0m
  [1m[36mInvestigation Load (0.1ms)[0m  [1m[34mSELECT "investigations".* FROM "investigations" WHERE (date_opened <= '2018-09-25 10:59:11.304053' AND (date_closed > '2018-09-25 10:59:11.304053' OR date_closed IS NULL))[0m
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------------------------
InvestigationTest: test_: Investigation should not allow date_opened to be set to 3.14159. 
-------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------------
InvestigationTest: test_: Investigation should have many crime_investigations. 
-------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------------------------------
InvestigationTest: test_: Within context should have an with_batman scope to find cases Batman helped with. 
------------------------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.5ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Murder"], ["felony", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder, Second Degree"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony", "active") VALUES (?, ?, ?)[0m  [["name", "Murder, Second Degree"], ["felony", 1], ["active", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Arson"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Arson"], ["felony", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Robbery"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Robbery"], ["felony", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Trespass"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Trespass"], ["felony", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvestigation Create (0.1ms)[0m  [1m[32mINSERT INTO "investigations" ("title", "description", "crime_location", "date_opened", "solved", "batman_involved") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", "Lacey Towers Murder"], ["description", "Tiffany Ambrose was murdered in Lacey Towers. Ms. Ambrose was known to be one of Roman Sionis' girlfriends. Long list of priors, but unclear if she was the primary target here or the other unidentified male found dead with her."], ["crime_location", "Lacey Towers"], ["date_opened", "2020-04-25"], ["solved", 0], ["batman_involved", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvestigation Create (0.1ms)[0m  [1m[32mINSERT INTO "investigations" ("title", "description", "crime_location", "date_opened", "date_closed", "solved", "batman_involved") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "Pussyfoot Heist"], ["description", "Theft of $1.2 million in rare jewels."], ["crime_location", "2809 West 20th Street"], ["date_opened", "2018-08-25"], ["date_closed", "2018-10-25"], ["solved", 1], ["batman_involved", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvestigation Create (0.1ms)[0m  [1m[32mINSERT INTO "investigations" ("title", "description", "crime_location", "date_opened", "solved", "batman_involved") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", "Great Gotham Harbor Arson"], ["description", "The burning of the Gotham Harbor. Over $24 million in property damage done."], ["crime_location", "Gotham Harbor"], ["date_opened", "2020-02-25"], ["solved", 0], ["batman_involved", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Load (0.1ms)[0m  [1m[34mSELECT "crimes".* FROM "crimes" WHERE "crimes"."active" = ?[0m  [["active", 1]]
  [1m[36mInvestigation Load (0.0ms)[0m  [1m[34mSELECT "investigations".* FROM "investigations"[0m
  [1m[36mCrimeInvestigation Create (0.1ms)[0m  [1m[32mINSERT INTO "crime_investigations" ("crime_id", "investigation_id") VALUES (?, ?)[0m  [["crime_id", 1], ["investigation_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvestigation Update (0.1ms)[0m  [1m[33mUPDATE "investigations" SET "date_closed" = ? WHERE "investigations"."id" = ?[0m  [["date_closed", nil], ["id", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Load (0.1ms)[0m  [1m[34mSELECT "crimes".* FROM "crimes" WHERE "crimes"."active" = ?[0m  [["active", 1]]
  [1m[36mInvestigation Load (0.0ms)[0m  [1m[34mSELECT "investigations".* FROM "investigations"[0m
  [1m[36mCrimeInvestigation Create (0.1ms)[0m  [1m[32mINSERT INTO "crime_investigations" ("crime_id", "investigation_id") VALUES (?, ?)[0m  [["crime_id", 4], ["investigation_id", 2]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Load (0.0ms)[0m  [1m[34mSELECT "crimes".* FROM "crimes" WHERE "crimes"."active" = ?[0m  [["active", 1]]
  [1m[36mInvestigation Load (0.0ms)[0m  [1m[34mSELECT "investigations".* FROM "investigations"[0m
  [1m[36mCrimeInvestigation Create (0.1ms)[0m  [1m[32mINSERT INTO "crime_investigations" ("crime_id", "investigation_id") VALUES (?, ?)[0m  [["crime_id", 5], ["investigation_id", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvestigation Update (0.1ms)[0m  [1m[33mUPDATE "investigations" SET "date_closed" = ? WHERE "investigations"."id" = ?[0m  [["date_closed", "2018-10-25"], ["id", 2]]
  [1m[36mAssignment Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "assignments" WHERE "assignments"."investigation_id" = ? AND "assignments"."end_date" IS NULL LIMIT ?[0m  [["investigation_id", 2], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Load (0.0ms)[0m  [1m[34mSELECT "crimes".* FROM "crimes" WHERE "crimes"."active" = ?[0m  [["active", 1]]
  [1m[36mInvestigation Load (0.0ms)[0m  [1m[34mSELECT "investigations".* FROM "investigations"[0m
  [1m[36mCrimeInvestigation Create (0.1ms)[0m  [1m[32mINSERT INTO "crime_investigations" ("crime_id", "investigation_id") VALUES (?, ?)[0m  [["crime_id", 3], ["investigation_id", 3]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvestigation Load (0.1ms)[0m  [1m[34mSELECT "investigations".* FROM "investigations" WHERE "investigations"."batman_involved" = ?[0m  [["batman_involved", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------
InvestigationTest: test_: Investigation should have many investigation_notes. 
------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------------------
InvestigationTest: test_: Investigation should not allow date_opened to be set to 2. 
-------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------
InvestigationTest: test_: Investigation should require title to be set. 
------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------------
InvestigationTest: test_: Within context should have an chronological scope for ordering. 
------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.3ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Murder"], ["felony", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder, Second Degree"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony", "active") VALUES (?, ?, ?)[0m  [["name", "Murder, Second Degree"], ["felony", 1], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Arson"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Arson"], ["felony", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Robbery"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Robbery"], ["felony", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Trespass"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Trespass"], ["felony", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvestigation Create (0.2ms)[0m  [1m[32mINSERT INTO "investigations" ("title", "description", "crime_location", "date_opened", "solved", "batman_involved") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", "Lacey Towers Murder"], ["description", "Tiffany Ambrose was murdered in Lacey Towers. Ms. Ambrose was known to be one of Roman Sionis' girlfriends. Long list of priors, but unclear if she was the primary target here or the other unidentified male found dead with her."], ["crime_location", "Lacey Towers"], ["date_opened", "2020-04-25"], ["solved", 0], ["batman_involved", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvestigation Create (0.1ms)[0m  [1m[32mINSERT INTO "investigations" ("title", "description", "crime_location", "date_opened", "date_closed", "solved", "batman_involved") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "Pussyfoot Heist"], ["description", "Theft of $1.2 million in rare jewels."], ["crime_location", "2809 West 20th Street"], ["date_opened", "2018-08-25"], ["date_closed", "2018-10-25"], ["solved", 1], ["batman_involved", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvestigation Create (0.1ms)[0m  [1m[32mINSERT INTO "investigations" ("title", "description", "crime_location", "date_opened", "solved", "batman_involved") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", "Great Gotham Harbor Arson"], ["description", "The burning of the Gotham Harbor. Over $24 million in property damage done."], ["crime_location", "Gotham Harbor"], ["date_opened", "2020-02-25"], ["solved", 0], ["batman_involved", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Load (0.1ms)[0m  [1m[34mSELECT "crimes".* FROM "crimes" WHERE "crimes"."active" = ?[0m  [["active", 1]]
  [1m[36mInvestigation Load (0.0ms)[0m  [1m[34mSELECT "investigations".* FROM "investigations"[0m
  [1m[36mCrimeInvestigation Create (0.1ms)[0m  [1m[32mINSERT INTO "crime_investigations" ("crime_id", "investigation_id") VALUES (?, ?)[0m  [["crime_id", 1], ["investigation_id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvestigation Update (0.1ms)[0m  [1m[33mUPDATE "investigations" SET "date_closed" = ? WHERE "investigations"."id" = ?[0m  [["date_closed", nil], ["id", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Load (0.0ms)[0m  [1m[34mSELECT "crimes".* FROM "crimes" WHERE "crimes"."active" = ?[0m  [["active", 1]]
  [1m[36mInvestigation Load (0.0ms)[0m  [1m[34mSELECT "investigations".* FROM "investigations"[0m
  [1m[36mCrimeInvestigation Create (0.1ms)[0m  [1m[32mINSERT INTO "crime_investigations" ("crime_id", "investigation_id") VALUES (?, ?)[0m  [["crime_id", 4], ["investigation_id", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Load (0.0ms)[0m  [1m[34mSELECT "crimes".* FROM "crimes" WHERE "crimes"."active" = ?[0m  [["active", 1]]
  [1m[36mInvestigation Load (0.0ms)[0m  [1m[34mSELECT "investigations".* FROM "investigations"[0m
  [1m[36mCrimeInvestigation Create (0.1ms)[0m  [1m[32mINSERT INTO "crime_investigations" ("crime_id", "investigation_id") VALUES (?, ?)[0m  [["crime_id", 5], ["investigation_id", 2]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvestigation Update (0.1ms)[0m  [1m[33mUPDATE "investigations" SET "date_closed" = ? WHERE "investigations"."id" = ?[0m  [["date_closed", "2018-10-25"], ["id", 2]]
  [1m[36mAssignment Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "assignments" WHERE "assignments"."investigation_id" = ? AND "assignments"."end_date" IS NULL LIMIT ?[0m  [["investigation_id", 2], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Load (0.0ms)[0m  [1m[34mSELECT "crimes".* FROM "crimes" WHERE "crimes"."active" = ?[0m  [["active", 1]]
  [1m[36mInvestigation Load (0.0ms)[0m  [1m[34mSELECT "investigations".* FROM "investigations"[0m
  [1m[36mCrimeInvestigation Create (0.1ms)[0m  [1m[32mINSERT INTO "crime_investigations" ("crime_id", "investigation_id") VALUES (?, ?)[0m  [["crime_id", 3], ["investigation_id", 3]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvestigation Load (0.1ms)[0m  [1m[34mSELECT "investigations".* FROM "investigations" ORDER BY "investigations"."date_opened" ASC[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------------------------------------------
InvestigationTest: test_: Within context should have an unsolved scope to find unsolved cases. 
-----------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.3ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Murder"], ["felony", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder, Second Degree"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.2ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony", "active") VALUES (?, ?, ?)[0m  [["name", "Murder, Second Degree"], ["felony", 1], ["active", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Arson"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Arson"], ["felony", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Robbery"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Robbery"], ["felony", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Trespass"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Trespass"], ["felony", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvestigation Create (0.1ms)[0m  [1m[32mINSERT INTO "investigations" ("title", "description", "crime_location", "date_opened", "solved", "batman_involved") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", "Lacey Towers Murder"], ["description", "Tiffany Ambrose was murdered in Lacey Towers. Ms. Ambrose was known to be one of Roman Sionis' girlfriends. Long list of priors, but unclear if she was the primary target here or the other unidentified male found dead with her."], ["crime_location", "Lacey Towers"], ["date_opened", "2020-04-25"], ["solved", 0], ["batman_involved", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvestigation Create (0.1ms)[0m  [1m[32mINSERT INTO "investigations" ("title", "description", "crime_location", "date_opened", "date_closed", "solved", "batman_involved") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "Pussyfoot Heist"], ["description", "Theft of $1.2 million in rare jewels."], ["crime_location", "2809 West 20th Street"], ["date_opened", "2018-08-25"], ["date_closed", "2018-10-25"], ["solved", 1], ["batman_involved", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvestigation Create (0.1ms)[0m  [1m[32mINSERT INTO "investigations" ("title", "description", "crime_location", "date_opened", "solved", "batman_involved") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", "Great Gotham Harbor Arson"], ["description", "The burning of the Gotham Harbor. Over $24 million in property damage done."], ["crime_location", "Gotham Harbor"], ["date_opened", "2020-02-25"], ["solved", 0], ["batman_involved", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Load (0.1ms)[0m  [1m[34mSELECT "crimes".* FROM "crimes" WHERE "crimes"."active" = ?[0m  [["active", 1]]
  [1m[36mInvestigation Load (0.0ms)[0m  [1m[34mSELECT "investigations".* FROM "investigations"[0m
  [1m[36mCrimeInvestigation Create (0.1ms)[0m  [1m[32mINSERT INTO "crime_investigations" ("crime_id", "investigation_id") VALUES (?, ?)[0m  [["crime_id", 1], ["investigation_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvestigation Update (0.1ms)[0m  [1m[33mUPDATE "investigations" SET "date_closed" = ? WHERE "investigations"."id" = ?[0m  [["date_closed", nil], ["id", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Load (0.1ms)[0m  [1m[34mSELECT "crimes".* FROM "crimes" WHERE "crimes"."active" = ?[0m  [["active", 1]]
  [1m[36mInvestigation Load (0.0ms)[0m  [1m[34mSELECT "investigations".* FROM "investigations"[0m
  [1m[36mCrimeInvestigation Create (0.1ms)[0m  [1m[32mINSERT INTO "crime_investigations" ("crime_id", "investigation_id") VALUES (?, ?)[0m  [["crime_id", 4], ["investigation_id", 2]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Load (0.0ms)[0m  [1m[34mSELECT "crimes".* FROM "crimes" WHERE "crimes"."active" = ?[0m  [["active", 1]]
  [1m[36mInvestigation Load (0.0ms)[0m  [1m[34mSELECT "investigations".* FROM "investigations"[0m
  [1m[36mCrimeInvestigation Create (0.1ms)[0m  [1m[32mINSERT INTO "crime_investigations" ("crime_id", "investigation_id") VALUES (?, ?)[0m  [["crime_id", 5], ["investigation_id", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvestigation Update (0.1ms)[0m  [1m[33mUPDATE "investigations" SET "date_closed" = ? WHERE "investigations"."id" = ?[0m  [["date_closed", "2018-10-25"], ["id", 2]]
  [1m[36mAssignment Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "assignments" WHERE "assignments"."investigation_id" = ? AND "assignments"."end_date" IS NULL LIMIT ?[0m  [["investigation_id", 2], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Load (0.0ms)[0m  [1m[34mSELECT "crimes".* FROM "crimes" WHERE "crimes"."active" = ?[0m  [["active", 1]]
  [1m[36mInvestigation Load (0.0ms)[0m  [1m[34mSELECT "investigations".* FROM "investigations"[0m
  [1m[36mCrimeInvestigation Create (0.1ms)[0m  [1m[32mINSERT INTO "crime_investigations" ("crime_id", "investigation_id") VALUES (?, ?)[0m  [["crime_id", 3], ["investigation_id", 3]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvestigation Load (0.1ms)[0m  [1m[34mSELECT "investigations".* FROM "investigations" WHERE "investigations"."solved" != ?[0m  [["solved", 1]]
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------------------------------------
InvestigationTest: test_: Investigation should not allow date_opened to be set to "bad". 
-----------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------
InvestigationTest: test_: Investigation should require date_opened to be set. 
------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------------------
InvestigationTest: test_: Investigation should allow date_opened to be set to Sat, 25 Apr 2020. 
------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------------------------------
InvestigationTest: test_: Within context should have title_search scope to find by title fragment. 
---------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.4ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Murder"], ["felony", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder, Second Degree"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony", "active") VALUES (?, ?, ?)[0m  [["name", "Murder, Second Degree"], ["felony", 1], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Arson"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Arson"], ["felony", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Robbery"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Robbery"], ["felony", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Trespass"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Trespass"], ["felony", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvestigation Create (0.1ms)[0m  [1m[32mINSERT INTO "investigations" ("title", "description", "crime_location", "date_opened", "solved", "batman_involved") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", "Lacey Towers Murder"], ["description", "Tiffany Ambrose was murdered in Lacey Towers. Ms. Ambrose was known to be one of Roman Sionis' girlfriends. Long list of priors, but unclear if she was the primary target here or the other unidentified male found dead with her."], ["crime_location", "Lacey Towers"], ["date_opened", "2020-04-25"], ["solved", 0], ["batman_involved", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvestigation Create (0.1ms)[0m  [1m[32mINSERT INTO "investigations" ("title", "description", "crime_location", "date_opened", "date_closed", "solved", "batman_involved") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "Pussyfoot Heist"], ["description", "Theft of $1.2 million in rare jewels."], ["crime_location", "2809 West 20th Street"], ["date_opened", "2018-08-25"], ["date_closed", "2018-10-25"], ["solved", 1], ["batman_involved", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvestigation Create (0.1ms)[0m  [1m[32mINSERT INTO "investigations" ("title", "description", "crime_location", "date_opened", "solved", "batman_involved") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", "Great Gotham Harbor Arson"], ["description", "The burning of the Gotham Harbor. Over $24 million in property damage done."], ["crime_location", "Gotham Harbor"], ["date_opened", "2020-02-25"], ["solved", 0], ["batman_involved", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Load (0.1ms)[0m  [1m[34mSELECT "crimes".* FROM "crimes" WHERE "crimes"."active" = ?[0m  [["active", 1]]
  [1m[36mInvestigation Load (0.0ms)[0m  [1m[34mSELECT "investigations".* FROM "investigations"[0m
  [1m[36mCrimeInvestigation Create (0.1ms)[0m  [1m[32mINSERT INTO "crime_investigations" ("crime_id", "investigation_id") VALUES (?, ?)[0m  [["crime_id", 1], ["investigation_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvestigation Update (0.1ms)[0m  [1m[33mUPDATE "investigations" SET "date_closed" = ? WHERE "investigations"."id" = ?[0m  [["date_closed", nil], ["id", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Load (0.0ms)[0m  [1m[34mSELECT "crimes".* FROM "crimes" WHERE "crimes"."active" = ?[0m  [["active", 1]]
  [1m[36mInvestigation Load (0.0ms)[0m  [1m[34mSELECT "investigations".* FROM "investigations"[0m
  [1m[36mCrimeInvestigation Create (0.1ms)[0m  [1m[32mINSERT INTO "crime_investigations" ("crime_id", "investigation_id") VALUES (?, ?)[0m  [["crime_id", 4], ["investigation_id", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Load (0.0ms)[0m  [1m[34mSELECT "crimes".* FROM "crimes" WHERE "crimes"."active" = ?[0m  [["active", 1]]
  [1m[36mInvestigation Load (0.0ms)[0m  [1m[34mSELECT "investigations".* FROM "investigations"[0m
  [1m[36mCrimeInvestigation Create (0.1ms)[0m  [1m[32mINSERT INTO "crime_investigations" ("crime_id", "investigation_id") VALUES (?, ?)[0m  [["crime_id", 5], ["investigation_id", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvestigation Update (0.1ms)[0m  [1m[33mUPDATE "investigations" SET "date_closed" = ? WHERE "investigations"."id" = ?[0m  [["date_closed", "2018-10-25"], ["id", 2]]
  [1m[36mAssignment Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "assignments" WHERE "assignments"."investigation_id" = ? AND "assignments"."end_date" IS NULL LIMIT ?[0m  [["investigation_id", 2], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Load (0.1ms)[0m  [1m[34mSELECT "crimes".* FROM "crimes" WHERE "crimes"."active" = ?[0m  [["active", 1]]
  [1m[36mInvestigation Load (0.1ms)[0m  [1m[34mSELECT "investigations".* FROM "investigations"[0m
  [1m[36mCrimeInvestigation Create (0.1ms)[0m  [1m[32mINSERT INTO "crime_investigations" ("crime_id", "investigation_id") VALUES (?, ?)[0m  [["crime_id", 3], ["investigation_id", 3]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvestigation Load (0.2ms)[0m  [1m[34mSELECT "investigations".* FROM "investigations" WHERE (title LIKE '%great%')[0m
  [1m[36mInvestigation Load (0.1ms)[0m  [1m[34mSELECT "investigations".* FROM "investigations" WHERE (title LIKE '%tower%')[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------------------------------
UnitTest: test_: Within context should have make_active and make_inactive methods. 
-----------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Major Crimes"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.2ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Major Crimes"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Headquarters"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Headquarters"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Homicide"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Homicide"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Section 31"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name", "active") VALUES (?, ?)[0m  [["name", "Section 31"], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) AND "units"."id" != ? LIMIT ?[0m  [["name", "Major Crimes"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUnit Update (0.1ms)[0m  [1m[33mUPDATE "units" SET "active" = ? WHERE "units"."id" = ?[0m  [["active", 0], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUnit Load (0.3ms)[0m  [1m[34mSELECT  "units".* FROM "units" WHERE "units"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) AND "units"."id" != ? LIMIT ?[0m  [["name", "Major Crimes"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUnit Update (0.1ms)[0m  [1m[33mUPDATE "units" SET "active" = ? WHERE "units"."id" = ?[0m  [["active", 1], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUnit Load (0.0ms)[0m  [1m[34mSELECT  "units".* FROM "units" WHERE "units"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------------------------------------
UnitTest: test_: Within context should not be able destroy units with officers assigned. 
-----------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Major Crimes"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.3ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Major Crimes"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Headquarters"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Headquarters"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Homicide"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Homicide"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Section 31"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name", "active") VALUES (?, ?)[0m  [["name", "Section 31"], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------
UnitTest: test_: Unit should require name to be set. 
-----------------------------------------------------
  [1m[36mUnit Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE "units"."name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
UnitTest: test_: Unit should have many assignments through officers. 
---------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------------------------------------
UnitTest: test_: Within context should be able destroy units without officers assigned. 
----------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Major Crimes"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.3ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Major Crimes"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Headquarters"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Headquarters"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Homicide"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.2ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Homicide"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Section 31"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name", "active") VALUES (?, ?)[0m  [["name", "Section 31"], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------------------------------------
UnitTest: test_: Within context should be able to calculate the number of active officers in the unit. 
-------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Major Crimes"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.9ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Major Crimes"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Headquarters"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Headquarters"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Homicide"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Homicide"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Section 31"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name", "active") VALUES (?, ?)[0m  [["name", "Section 31"], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------
UnitTest: test_: Unit should require unique value for name. 
------------------------------------------------------------
  [1m[36mUnit Load (0.2ms)[0m  [1m[34mSELECT  "units".* FROM "units" ORDER BY "units"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Create (0.3ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "a"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "A"], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------
UnitTest: test_: Within context should have active and inactive scopes. 
------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Major Crimes"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.5ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Major Crimes"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Headquarters"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Headquarters"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Homicide"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Homicide"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Section 31"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name", "active") VALUES (?, ?)[0m  [["name", "Section 31"], ["active", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "units" WHERE "units"."active" = ?[0m  [["active", 1]]
  [1m[36mUnit Load (0.0ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."active" = ?[0m  [["active", 1]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "units" WHERE "units"."active" != ?[0m  [["active", 1]]
  [1m[36mUnit Load (0.1ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."active" != ?[0m  [["active", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------------------------------------------------
UnitTest: test_: Within context should be able to calculate the number of open investigations the unit is part of. 
-------------------------------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Major Crimes"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.6ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Major Crimes"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Headquarters"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Headquarters"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Homicide"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Homicide"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Section 31"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name", "active") VALUES (?, ?)[0m  [["name", "Section 31"], ["active", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------
UnitTest: test_: Unit should have many officers. 
-------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------------------
UnitTest: test_: Within context should have an alphabetical scope for ordering. 
--------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Major Crimes"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.3ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Major Crimes"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Headquarters"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Headquarters"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Homicide"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Homicide"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Section 31"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name", "active") VALUES (?, ?)[0m  [["name", "Section 31"], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUnit Load (0.1ms)[0m  [1m[34mSELECT "units".* FROM "units" ORDER BY name[0m
  [1m[35m (1.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------------------------------------
CrimeInvestigationTest: test_: Within context should identify a closed case as invalid. 
----------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.2ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Murder"], ["felony", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder, Second Degree"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony", "active") VALUES (?, ?, ?)[0m  [["name", "Murder, Second Degree"], ["felony", 1], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Arson"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Arson"], ["felony", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Robbery"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Robbery"], ["felony", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Trespass"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.2ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Trespass"], ["felony", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvestigation Create (0.2ms)[0m  [1m[32mINSERT INTO "investigations" ("title", "description", "crime_location", "date_opened", "solved", "batman_involved") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", "Lacey Towers Murder"], ["description", "Tiffany Ambrose was murdered in Lacey Towers. Ms. Ambrose was known to be one of Roman Sionis' girlfriends. Long list of priors, but unclear if she was the primary target here or the other unidentified male found dead with her."], ["crime_location", "Lacey Towers"], ["date_opened", "2020-04-25"], ["solved", 0], ["batman_involved", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvestigation Create (0.2ms)[0m  [1m[32mINSERT INTO "investigations" ("title", "description", "crime_location", "date_opened", "date_closed", "solved", "batman_involved") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "Pussyfoot Heist"], ["description", "Theft of $1.2 million in rare jewels."], ["crime_location", "2809 West 20th Street"], ["date_opened", "2018-08-25"], ["date_closed", "2018-10-25"], ["solved", 1], ["batman_involved", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvestigation Create (0.1ms)[0m  [1m[32mINSERT INTO "investigations" ("title", "description", "crime_location", "date_opened", "solved", "batman_involved") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", "Great Gotham Harbor Arson"], ["description", "The burning of the Gotham Harbor. Over $24 million in property damage done."], ["crime_location", "Gotham Harbor"], ["date_opened", "2020-02-25"], ["solved", 0], ["batman_involved", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Load (0.0ms)[0m  [1m[34mSELECT "crimes".* FROM "crimes" WHERE "crimes"."active" = ?[0m  [["active", 1]]
  [1m[36mInvestigation Load (0.0ms)[0m  [1m[34mSELECT "investigations".* FROM "investigations"[0m
  [1m[36mCrimeInvestigation Create (0.2ms)[0m  [1m[32mINSERT INTO "crime_investigations" ("crime_id", "investigation_id") VALUES (?, ?)[0m  [["crime_id", 1], ["investigation_id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvestigation Update (0.1ms)[0m  [1m[33mUPDATE "investigations" SET "date_closed" = ? WHERE "investigations"."id" = ?[0m  [["date_closed", nil], ["id", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Load (0.0ms)[0m  [1m[34mSELECT "crimes".* FROM "crimes" WHERE "crimes"."active" = ?[0m  [["active", 1]]
  [1m[36mInvestigation Load (0.1ms)[0m  [1m[34mSELECT "investigations".* FROM "investigations"[0m
  [1m[36mCrimeInvestigation Create (0.1ms)[0m  [1m[32mINSERT INTO "crime_investigations" ("crime_id", "investigation_id") VALUES (?, ?)[0m  [["crime_id", 4], ["investigation_id", 2]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Load (0.0ms)[0m  [1m[34mSELECT "crimes".* FROM "crimes" WHERE "crimes"."active" = ?[0m  [["active", 1]]
  [1m[36mInvestigation Load (0.0ms)[0m  [1m[34mSELECT "investigations".* FROM "investigations"[0m
  [1m[36mCrimeInvestigation Create (0.1ms)[0m  [1m[32mINSERT INTO "crime_investigations" ("crime_id", "investigation_id") VALUES (?, ?)[0m  [["crime_id", 5], ["investigation_id", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvestigation Update (0.1ms)[0m  [1m[33mUPDATE "investigations" SET "date_closed" = ? WHERE "investigations"."id" = ?[0m  [["date_closed", "2018-10-25"], ["id", 2]]
  [1m[36mAssignment Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "assignments" WHERE "assignments"."investigation_id" = ? AND "assignments"."end_date" IS NULL LIMIT ?[0m  [["investigation_id", 2], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Load (0.0ms)[0m  [1m[34mSELECT "crimes".* FROM "crimes" WHERE "crimes"."active" = ?[0m  [["active", 1]]
  [1m[36mInvestigation Load (0.0ms)[0m  [1m[34mSELECT "investigations".* FROM "investigations"[0m
  [1m[36mCrimeInvestigation Create (0.1ms)[0m  [1m[32mINSERT INTO "crime_investigations" ("crime_id", "investigation_id") VALUES (?, ?)[0m  [["crime_id", 3], ["investigation_id", 3]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCrime Load (0.0ms)[0m  [1m[34mSELECT "crimes".* FROM "crimes" WHERE "crimes"."active" = ?[0m  [["active", 1]]
  [1m[36mInvestigation Load (0.0ms)[0m  [1m[34mSELECT "investigations".* FROM "investigations"[0m
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------------------------
CrimeInvestigationTest: test_: CrimeInvestigation should require investigation_id to be set. 
---------------------------------------------------------------------------------------------
  [1m[36mCrime Load (0.1ms)[0m  [1m[34mSELECT "crimes".* FROM "crimes" WHERE "crimes"."active" = ?[0m  [["active", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------------------------------------
CrimeInvestigationTest: test_: Within context should have a scope for_crime passing in a crime object. 
-------------------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.2ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Murder"], ["felony", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder, Second Degree"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony", "active") VALUES (?, ?, ?)[0m  [["name", "Murder, Second Degree"], ["felony", 1], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Arson"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Arson"], ["felony", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Robbery"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Robbery"], ["felony", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Trespass"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Trespass"], ["felony", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvestigation Create (0.1ms)[0m  [1m[32mINSERT INTO "investigations" ("title", "description", "crime_location", "date_opened", "solved", "batman_involved") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", "Lacey Towers Murder"], ["description", "Tiffany Ambrose was murdered in Lacey Towers. Ms. Ambrose was known to be one of Roman Sionis' girlfriends. Long list of priors, but unclear if she was the primary target here or the other unidentified male found dead with her."], ["crime_location", "Lacey Towers"], ["date_opened", "2020-04-25"], ["solved", 0], ["batman_involved", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvestigation Create (0.1ms)[0m  [1m[32mINSERT INTO "investigations" ("title", "description", "crime_location", "date_opened", "date_closed", "solved", "batman_involved") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "Pussyfoot Heist"], ["description", "Theft of $1.2 million in rare jewels."], ["crime_location", "2809 West 20th Street"], ["date_opened", "2018-08-25"], ["date_closed", "2018-10-25"], ["solved", 1], ["batman_involved", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvestigation Create (0.1ms)[0m  [1m[32mINSERT INTO "investigations" ("title", "description", "crime_location", "date_opened", "solved", "batman_involved") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", "Great Gotham Harbor Arson"], ["description", "The burning of the Gotham Harbor. Over $24 million in property damage done."], ["crime_location", "Gotham Harbor"], ["date_opened", "2020-02-25"], ["solved", 0], ["batman_involved", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Load (0.1ms)[0m  [1m[34mSELECT "crimes".* FROM "crimes" WHERE "crimes"."active" = ?[0m  [["active", 1]]
  [1m[36mInvestigation Load (0.0ms)[0m  [1m[34mSELECT "investigations".* FROM "investigations"[0m
  [1m[36mCrimeInvestigation Create (0.2ms)[0m  [1m[32mINSERT INTO "crime_investigations" ("crime_id", "investigation_id") VALUES (?, ?)[0m  [["crime_id", 1], ["investigation_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvestigation Update (0.1ms)[0m  [1m[33mUPDATE "investigations" SET "date_closed" = ? WHERE "investigations"."id" = ?[0m  [["date_closed", nil], ["id", 2]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Load (0.0ms)[0m  [1m[34mSELECT "crimes".* FROM "crimes" WHERE "crimes"."active" = ?[0m  [["active", 1]]
  [1m[36mInvestigation Load (0.0ms)[0m  [1m[34mSELECT "investigations".* FROM "investigations"[0m
  [1m[36mCrimeInvestigation Create (0.1ms)[0m  [1m[32mINSERT INTO "crime_investigations" ("crime_id", "investigation_id") VALUES (?, ?)[0m  [["crime_id", 4], ["investigation_id", 2]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Load (0.0ms)[0m  [1m[34mSELECT "crimes".* FROM "crimes" WHERE "crimes"."active" = ?[0m  [["active", 1]]
  [1m[36mInvestigation Load (0.1ms)[0m  [1m[34mSELECT "investigations".* FROM "investigations"[0m
  [1m[36mCrimeInvestigation Create (0.1ms)[0m  [1m[32mINSERT INTO "crime_investigations" ("crime_id", "investigation_id") VALUES (?, ?)[0m  [["crime_id", 5], ["investigation_id", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvestigation Update (0.1ms)[0m  [1m[33mUPDATE "investigations" SET "date_closed" = ? WHERE "investigations"."id" = ?[0m  [["date_closed", "2018-10-25"], ["id", 2]]
  [1m[36mAssignment Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "assignments" WHERE "assignments"."investigation_id" = ? AND "assignments"."end_date" IS NULL LIMIT ?[0m  [["investigation_id", 2], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Load (0.0ms)[0m  [1m[34mSELECT "crimes".* FROM "crimes" WHERE "crimes"."active" = ?[0m  [["active", 1]]
  [1m[36mInvestigation Load (0.0ms)[0m  [1m[34mSELECT "investigations".* FROM "investigations"[0m
  [1m[36mCrimeInvestigation Create (0.1ms)[0m  [1m[32mINSERT INTO "crime_investigations" ("crime_id", "investigation_id") VALUES (?, ?)[0m  [["crime_id", 3], ["investigation_id", 3]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCrimeInvestigation Load (0.1ms)[0m  [1m[34mSELECT "crime_investigations".* FROM "crime_investigations" WHERE "crime_investigations"."crime_id" = ?[0m  [["crime_id", 1]]
  [1m[36mInvestigation Load (0.1ms)[0m  [1m[34mSELECT  "investigations".* FROM "investigations" WHERE "investigations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------------------------------
CrimeInvestigationTest: test_: CrimeInvestigation should belong to investigation. 
----------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------------------------
CrimeInvestigationTest: test_: Within context should identify a non-active crime as invalid. 
---------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.3ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Murder"], ["felony", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder, Second Degree"], ["LIMIT", 1]]
  [1m[36mCrime Create (2.2ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony", "active") VALUES (?, ?, ?)[0m  [["name", "Murder, Second Degree"], ["felony", 1], ["active", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Arson"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Arson"], ["felony", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Robbery"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Robbery"], ["felony", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Trespass"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Trespass"], ["felony", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvestigation Create (0.1ms)[0m  [1m[32mINSERT INTO "investigations" ("title", "description", "crime_location", "date_opened", "solved", "batman_involved") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", "Lacey Towers Murder"], ["description", "Tiffany Ambrose was murdered in Lacey Towers. Ms. Ambrose was known to be one of Roman Sionis' girlfriends. Long list of priors, but unclear if she was the primary target here or the other unidentified male found dead with her."], ["crime_location", "Lacey Towers"], ["date_opened", "2020-04-25"], ["solved", 0], ["batman_involved", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvestigation Create (0.1ms)[0m  [1m[32mINSERT INTO "investigations" ("title", "description", "crime_location", "date_opened", "date_closed", "solved", "batman_involved") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "Pussyfoot Heist"], ["description", "Theft of $1.2 million in rare jewels."], ["crime_location", "2809 West 20th Street"], ["date_opened", "2018-08-25"], ["date_closed", "2018-10-25"], ["solved", 1], ["batman_involved", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvestigation Create (0.1ms)[0m  [1m[32mINSERT INTO "investigations" ("title", "description", "crime_location", "date_opened", "solved", "batman_involved") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", "Great Gotham Harbor Arson"], ["description", "The burning of the Gotham Harbor. Over $24 million in property damage done."], ["crime_location", "Gotham Harbor"], ["date_opened", "2020-02-25"], ["solved", 0], ["batman_involved", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Load (0.1ms)[0m  [1m[34mSELECT "crimes".* FROM "crimes" WHERE "crimes"."active" = ?[0m  [["active", 1]]
  [1m[36mInvestigation Load (0.0ms)[0m  [1m[34mSELECT "investigations".* FROM "investigations"[0m
  [1m[36mCrimeInvestigation Create (0.1ms)[0m  [1m[32mINSERT INTO "crime_investigations" ("crime_id", "investigation_id") VALUES (?, ?)[0m  [["crime_id", 1], ["investigation_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvestigation Update (0.1ms)[0m  [1m[33mUPDATE "investigations" SET "date_closed" = ? WHERE "investigations"."id" = ?[0m  [["date_closed", nil], ["id", 2]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Load (0.0ms)[0m  [1m[34mSELECT "crimes".* FROM "crimes" WHERE "crimes"."active" = ?[0m  [["active", 1]]
  [1m[36mInvestigation Load (0.0ms)[0m  [1m[34mSELECT "investigations".* FROM "investigations"[0m
  [1m[36mCrimeInvestigation Create (0.1ms)[0m  [1m[32mINSERT INTO "crime_investigations" ("crime_id", "investigation_id") VALUES (?, ?)[0m  [["crime_id", 4], ["investigation_id", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Load (0.0ms)[0m  [1m[34mSELECT "crimes".* FROM "crimes" WHERE "crimes"."active" = ?[0m  [["active", 1]]
  [1m[36mInvestigation Load (0.0ms)[0m  [1m[34mSELECT "investigations".* FROM "investigations"[0m
  [1m[36mCrimeInvestigation Create (0.1ms)[0m  [1m[32mINSERT INTO "crime_investigations" ("crime_id", "investigation_id") VALUES (?, ?)[0m  [["crime_id", 5], ["investigation_id", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvestigation Update (0.1ms)[0m  [1m[33mUPDATE "investigations" SET "date_closed" = ? WHERE "investigations"."id" = ?[0m  [["date_closed", "2018-10-25"], ["id", 2]]
  [1m[36mAssignment Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "assignments" WHERE "assignments"."investigation_id" = ? AND "assignments"."end_date" IS NULL LIMIT ?[0m  [["investigation_id", 2], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Load (0.1ms)[0m  [1m[34mSELECT "crimes".* FROM "crimes" WHERE "crimes"."active" = ?[0m  [["active", 1]]
  [1m[36mInvestigation Load (0.0ms)[0m  [1m[34mSELECT "investigations".* FROM "investigations"[0m
  [1m[36mCrimeInvestigation Create (0.1ms)[0m  [1m[32mINSERT INTO "crime_investigations" ("crime_id", "investigation_id") VALUES (?, ?)[0m  [["crime_id", 3], ["investigation_id", 3]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCrime Load (0.1ms)[0m  [1m[34mSELECT "crimes".* FROM "crimes" WHERE "crimes"."active" = ?[0m  [["active", 1]]
  [1m[36mInvestigation Load (0.0ms)[0m  [1m[34mSELECT "investigations".* FROM "investigations"[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------------------------------------------
CrimeInvestigationTest: test_: Within context should have a scope for_investigation passing in an investigation object. 
------------------------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.2ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Murder"], ["felony", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder, Second Degree"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony", "active") VALUES (?, ?, ?)[0m  [["name", "Murder, Second Degree"], ["felony", 1], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Arson"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Arson"], ["felony", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Robbery"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Robbery"], ["felony", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Trespass"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Trespass"], ["felony", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvestigation Create (0.2ms)[0m  [1m[32mINSERT INTO "investigations" ("title", "description", "crime_location", "date_opened", "solved", "batman_involved") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", "Lacey Towers Murder"], ["description", "Tiffany Ambrose was murdered in Lacey Towers. Ms. Ambrose was known to be one of Roman Sionis' girlfriends. Long list of priors, but unclear if she was the primary target here or the other unidentified male found dead with her."], ["crime_location", "Lacey Towers"], ["date_opened", "2020-04-25"], ["solved", 0], ["batman_involved", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvestigation Create (0.1ms)[0m  [1m[32mINSERT INTO "investigations" ("title", "description", "crime_location", "date_opened", "date_closed", "solved", "batman_involved") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "Pussyfoot Heist"], ["description", "Theft of $1.2 million in rare jewels."], ["crime_location", "2809 West 20th Street"], ["date_opened", "2018-08-25"], ["date_closed", "2018-10-25"], ["solved", 1], ["batman_involved", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvestigation Create (0.1ms)[0m  [1m[32mINSERT INTO "investigations" ("title", "description", "crime_location", "date_opened", "solved", "batman_involved") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", "Great Gotham Harbor Arson"], ["description", "The burning of the Gotham Harbor. Over $24 million in property damage done."], ["crime_location", "Gotham Harbor"], ["date_opened", "2020-02-25"], ["solved", 0], ["batman_involved", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Load (0.1ms)[0m  [1m[34mSELECT "crimes".* FROM "crimes" WHERE "crimes"."active" = ?[0m  [["active", 1]]
  [1m[36mInvestigation Load (0.3ms)[0m  [1m[34mSELECT "investigations".* FROM "investigations"[0m
  [1m[36mCrimeInvestigation Create (0.2ms)[0m  [1m[32mINSERT INTO "crime_investigations" ("crime_id", "investigation_id") VALUES (?, ?)[0m  [["crime_id", 1], ["investigation_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvestigation Update (0.1ms)[0m  [1m[33mUPDATE "investigations" SET "date_closed" = ? WHERE "investigations"."id" = ?[0m  [["date_closed", nil], ["id", 2]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Load (0.0ms)[0m  [1m[34mSELECT "crimes".* FROM "crimes" WHERE "crimes"."active" = ?[0m  [["active", 1]]
  [1m[36mInvestigation Load (0.0ms)[0m  [1m[34mSELECT "investigations".* FROM "investigations"[0m
  [1m[36mCrimeInvestigation Create (0.1ms)[0m  [1m[32mINSERT INTO "crime_investigations" ("crime_id", "investigation_id") VALUES (?, ?)[0m  [["crime_id", 4], ["investigation_id", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Load (0.0ms)[0m  [1m[34mSELECT "crimes".* FROM "crimes" WHERE "crimes"."active" = ?[0m  [["active", 1]]
  [1m[36mInvestigation Load (0.0ms)[0m  [1m[34mSELECT "investigations".* FROM "investigations"[0m
  [1m[36mCrimeInvestigation Create (0.1ms)[0m  [1m[32mINSERT INTO "crime_investigations" ("crime_id", "investigation_id") VALUES (?, ?)[0m  [["crime_id", 5], ["investigation_id", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvestigation Update (0.1ms)[0m  [1m[33mUPDATE "investigations" SET "date_closed" = ? WHERE "investigations"."id" = ?[0m  [["date_closed", "2018-10-25"], ["id", 2]]
  [1m[36mAssignment Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "assignments" WHERE "assignments"."investigation_id" = ? AND "assignments"."end_date" IS NULL LIMIT ?[0m  [["investigation_id", 2], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Load (0.0ms)[0m  [1m[34mSELECT "crimes".* FROM "crimes" WHERE "crimes"."active" = ?[0m  [["active", 1]]
  [1m[36mInvestigation Load (0.0ms)[0m  [1m[34mSELECT "investigations".* FROM "investigations"[0m
  [1m[36mCrimeInvestigation Create (0.1ms)[0m  [1m[32mINSERT INTO "crime_investigations" ("crime_id", "investigation_id") VALUES (?, ?)[0m  [["crime_id", 3], ["investigation_id", 3]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCrimeInvestigation Load (0.1ms)[0m  [1m[34mSELECT "crime_investigations".* FROM "crime_investigations" WHERE "crime_investigations"."investigation_id" = ?[0m  [["investigation_id", 1]]
  [1m[36mCrime Load (0.1ms)[0m  [1m[34mSELECT  "crimes".* FROM "crimes" WHERE "crimes"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "crime_investigations" WHERE "crime_investigations"."investigation_id" = ?[0m  [["investigation_id", 2]]
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------------------
CrimeInvestigationTest: test_: CrimeInvestigation should require crime_id to be set. 
-------------------------------------------------------------------------------------
  [1m[36mCrime Load (0.1ms)[0m  [1m[34mSELECT "crimes".* FROM "crimes" WHERE "crimes"."active" = ?[0m  [["active", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------------
CrimeInvestigationTest: test_: CrimeInvestigation should belong to crime. 
--------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------------------
InvestigationNoteTest: test_: InvestigationNote should belong to investigation. 
--------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------------------------------------------------------
InvestigationNoteTest: test_: Within context should have a by_officer scope for ordering alphabetically by officer. 
--------------------------------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Major Crimes"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.4ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Major Crimes"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Headquarters"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Headquarters"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Homicide"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Homicide"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Section 31"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name", "active") VALUES (?, ?)[0m  [["name", "Section 31"], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------------------------------------------
InvestigationNoteTest: test_: Within context should have an chronological scope for ordering. 
----------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Major Crimes"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.3ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Major Crimes"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Headquarters"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Headquarters"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Homicide"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Homicide"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Section 31"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name", "active") VALUES (?, ?)[0m  [["name", "Section 31"], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------------------------------------
InvestigationNoteTest: test_: Within context should set the date of the note to current date by default. 
---------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Major Crimes"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.2ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Major Crimes"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Headquarters"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Headquarters"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Homicide"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Homicide"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Section 31"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name", "active") VALUES (?, ?)[0m  [["name", "Section 31"], ["active", 0]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------------
InvestigationNoteTest: test_: InvestigationNote should belong to officer. 
--------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------------------------------------------------------------
InvestigationNoteTest: test_: Within context should have a for_officer scope for retrieving notes by an officer. 
-----------------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Major Crimes"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.3ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Major Crimes"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Headquarters"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Headquarters"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Homicide"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.3ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Homicide"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Section 31"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name", "active") VALUES (?, ?)[0m  [["name", "Section 31"], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------------------------------
InvestigationNoteTest: test_: Within context should not allow a note by unassigned officer. 
--------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Major Crimes"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.4ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Major Crimes"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Headquarters"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Headquarters"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Homicide"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Homicide"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Section 31"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name", "active") VALUES (?, ?)[0m  [["name", "Section 31"], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------------------------
InvestigationNoteTest: test_: InvestigationNote should require investigation_id to be set. 
-------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------------------
InvestigationNoteTest: test_: InvestigationNote should require officer_id to be set. 
-------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------------------------------
InvestigationNoteTest: test_: InvestigationNote should require content to be set. 
----------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------------------------
InvestigationNoteTest: test_: Within context should not allow a new note on a closed case. 
-------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Major Crimes"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.3ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Major Crimes"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Headquarters"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.4ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Headquarters"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Homicide"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Homicide"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Section 31"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name", "active") VALUES (?, ?)[0m  [["name", "Section 31"], ["active", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
CrimeTest: test_: Within context should have make_active and make_inactive methods. 
------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.8ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Murder"], ["felony", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder, Second Degree"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony", "active") VALUES (?, ?, ?)[0m  [["name", "Murder, Second Degree"], ["felony", 1], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Arson"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Arson"], ["felony", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Robbery"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.3ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Robbery"], ["felony", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Trespass"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Trespass"], ["felony", 0]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) AND "crimes"."id" != ? LIMIT ?[0m  [["name", "Arson"], ["id", 3], ["LIMIT", 1]]
  [1m[36mCrime Update (0.1ms)[0m  [1m[33mUPDATE "crimes" SET "active" = ? WHERE "crimes"."id" = ?[0m  [["active", 0], ["id", 3]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCrime Load (0.1ms)[0m  [1m[34mSELECT  "crimes".* FROM "crimes" WHERE "crimes"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) AND "crimes"."id" != ? LIMIT ?[0m  [["name", "Arson"], ["id", 3], ["LIMIT", 1]]
  [1m[36mCrime Update (0.1ms)[0m  [1m[33mUPDATE "crimes" SET "active" = ? WHERE "crimes"."id" = ?[0m  [["active", 1], ["id", 3]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCrime Load (0.0ms)[0m  [1m[34mSELECT  "crimes".* FROM "crimes" WHERE "crimes"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
CrimeTest: test_: Within context should have active and inactive scopes. 
-------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.3ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Murder"], ["felony", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder, Second Degree"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.3ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony", "active") VALUES (?, ?, ?)[0m  [["name", "Murder, Second Degree"], ["felony", 1], ["active", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Arson"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Arson"], ["felony", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Robbery"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Robbery"], ["felony", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Trespass"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Trespass"], ["felony", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "crimes" WHERE "crimes"."active" = ?[0m  [["active", 1]]
  [1m[36mCrime Load (0.1ms)[0m  [1m[34mSELECT "crimes".* FROM "crimes" WHERE "crimes"."active" = ?[0m  [["active", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "crimes" WHERE "crimes"."active" != ?[0m  [["active", 1]]
  [1m[36mCrime Load (0.1ms)[0m  [1m[34mSELECT "crimes".* FROM "crimes" WHERE "crimes"."active" != ?[0m  [["active", 1]]
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------
CrimeTest: test_: Within context should never be destroyed. 
------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.5ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Murder"], ["felony", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder, Second Degree"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony", "active") VALUES (?, ?, ?)[0m  [["name", "Murder, Second Degree"], ["felony", 1], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Arson"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Arson"], ["felony", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Robbery"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Robbery"], ["felony", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Trespass"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Trespass"], ["felony", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------------------
AbilityTest: test_: Within context should verify the abilities of chief users in GCPD. 
---------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.7ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Murder"], ["felony", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder, Second Degree"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony", "active") VALUES (?, ?, ?)[0m  [["name", "Murder, Second Degree"], ["felony", 1], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Arson"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Arson"], ["felony", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Robbery"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Robbery"], ["felony", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Trespass"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Trespass"], ["felony", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Major Crimes"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Major Crimes"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Headquarters"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Headquarters"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Homicide"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Homicide"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Section 31"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name", "active") VALUES (?, ?)[0m  [["name", "Section 31"], ["active", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------------------------------------
AbilityTest: test_: Within context should verify the abilities of commish users to do everything. 
--------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Major Crimes"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.3ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Major Crimes"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Headquarters"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Headquarters"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Homicide"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Homicide"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Section 31"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name", "active") VALUES (?, ?)[0m  [["name", "Section 31"], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------------------------------------
AbilityTest: test_: Within context should verify the abilities of officer users in GCPD. 
-----------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.3ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Murder"], ["felony", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder, Second Degree"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony", "active") VALUES (?, ?, ?)[0m  [["name", "Murder, Second Degree"], ["felony", 1], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Arson"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.2ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Arson"], ["felony", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Robbery"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Robbery"], ["felony", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Trespass"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Trespass"], ["felony", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Major Crimes"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.2ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Major Crimes"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Headquarters"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Headquarters"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Homicide"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Homicide"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Section 31"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name", "active") VALUES (?, ?)[0m  [["name", "Section 31"], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------------------------
AssignmentTest: test_: Assignment should not allow start_date to be set to Sun, 26 Apr 2020. 
---------------------------------------------------------------------------------------------
  [1m[36mOfficer Load (0.2ms)[0m  [1m[34mSELECT "officers".* FROM "officers" WHERE "officers"."active" = ?[0m  [["active", 1]]
  [1m[36mAssignment Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "assignments" WHERE "assignments"."investigation_id" IS NULL AND "assignments"."officer_id" IS NULL AND "assignments"."end_date" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------------------------------------------------------
AssignmentTest: test_: Within context should not allow duplicate assignments if the assignment is current. 
-----------------------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Major Crimes"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.4ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Major Crimes"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Headquarters"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Headquarters"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Homicide"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Homicide"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Section 31"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name", "active") VALUES (?, ?)[0m  [["name", "Section 31"], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------
AssignmentTest: test_: Assignment should belong to officer. 
------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------------------------------------------
AssignmentTest: test_: Within context should identify a closed case as an invalid assignment. 
----------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Major Crimes"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.4ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Major Crimes"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Headquarters"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Headquarters"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Homicide"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Homicide"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Section 31"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name", "active") VALUES (?, ?)[0m  [["name", "Section 31"], ["active", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------
AssignmentTest: test_: Assignment should not allow start_date to be set to 2. 
------------------------------------------------------------------------------
  [1m[36mOfficer Load (0.2ms)[0m  [1m[34mSELECT "officers".* FROM "officers" WHERE "officers"."active" = ?[0m  [["active", 1]]
  [1m[36mAssignment Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "assignments" WHERE "assignments"."investigation_id" IS NULL AND "assignments"."officer_id" IS NULL AND "assignments"."end_date" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------------------
AssignmentTest: test_: Within context should allow reassignment of officer to an investigation. 
------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Major Crimes"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.3ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Major Crimes"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Headquarters"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Headquarters"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Homicide"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Homicide"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Section 31"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name", "active") VALUES (?, ?)[0m  [["name", "Section 31"], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------------------
AssignmentTest: test_: Within context should show that there are two assignments that are past. 
------------------------------------------------------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Major Crimes"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.5ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Major Crimes"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Headquarters"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Headquarters"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (1.2ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Homicide"], ["LIMIT", 1]]
  [1m[36mUnit Create (1.0ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Homicide"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Section 31"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name", "active") VALUES (?, ?)[0m  [["name", "Section 31"], ["active", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------------------
AssignmentTest: test_: Assignment should require start_date to be set. 
-----------------------------------------------------------------------
  [1m[36mOfficer Load (0.2ms)[0m  [1m[34mSELECT "officers".* FROM "officers" WHERE "officers"."active" = ?[0m  [["active", 1]]
  [1m[36mAssignment Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "assignments" WHERE "assignments"."investigation_id" IS NULL AND "assignments"."officer_id" IS NULL AND "assignments"."end_date" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------------------------
AssignmentTest: test_: Assignment should require investigation_id to be set. 
-----------------------------------------------------------------------------
  [1m[36mOfficer Load (0.6ms)[0m  [1m[34mSELECT "officers".* FROM "officers" WHERE "officers"."active" = ?[0m  [["active", 1]]
  [1m[36mAssignment Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "assignments" WHERE "assignments"."investigation_id" IS NULL AND "assignments"."officer_id" IS NULL AND "assignments"."end_date" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------
AssignmentTest: test_: Assignment should belong to investigation. 
------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------------------
AssignmentTest: test_: Assignment should not allow start_date to be set to nil. 
--------------------------------------------------------------------------------
  [1m[36mOfficer Load (0.3ms)[0m  [1m[34mSELECT "officers".* FROM "officers" WHERE "officers"."active" = ?[0m  [["active", 1]]
  [1m[36mAssignment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "assignments" WHERE "assignments"."investigation_id" IS NULL AND "assignments"."officer_id" IS NULL AND "assignments"."end_date" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------------------------------
AssignmentTest: test_: Within context should show that there are two assignments that are current. 
---------------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Major Crimes"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.3ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Major Crimes"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Headquarters"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.3ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Headquarters"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Homicide"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Homicide"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Section 31"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name", "active") VALUES (?, ?)[0m  [["name", "Section 31"], ["active", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------------------------------------------------
AssignmentTest: test_: Within context should identify a non-active officer as an invalid assignment. 
-----------------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Major Crimes"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.3ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Major Crimes"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Headquarters"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Headquarters"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Homicide"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Homicide"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Section 31"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name", "active") VALUES (?, ?)[0m  [["name", "Section 31"], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------------------------------------
AssignmentTest: test_: Assignment should allow start_date to be set to Sat, 25 Apr 2020. 
-----------------------------------------------------------------------------------------
  [1m[36mOfficer Load (0.1ms)[0m  [1m[34mSELECT "officers".* FROM "officers" WHERE "officers"."active" = ?[0m  [["active", 1]]
  [1m[36mAssignment Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "assignments" WHERE "assignments"."investigation_id" IS NULL AND "assignments"."officer_id" IS NULL AND "assignments"."end_date" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------------------------------------------
AssignmentTest: test_: Within context should order assignments chronologically by start date. 
----------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Major Crimes"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.4ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Major Crimes"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Headquarters"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Headquarters"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Homicide"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Homicide"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Section 31"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.2ms)[0m  [1m[32mINSERT INTO "units" ("name", "active") VALUES (?, ?)[0m  [["name", "Section 31"], ["active", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------------------------------------------
AssignmentTest: test_: Within context should order assignments alphabetically by officer name. 
-----------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Major Crimes"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.2ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Major Crimes"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Headquarters"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Headquarters"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Homicide"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Homicide"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Section 31"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name", "active") VALUES (?, ?)[0m  [["name", "Section 31"], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------------------------------------
AssignmentTest: test_: Assignment should allow start_date to be set to Fri, 24 Apr 2020. 
-----------------------------------------------------------------------------------------
  [1m[36mOfficer Load (0.1ms)[0m  [1m[34mSELECT "officers".* FROM "officers" WHERE "officers"."active" = ?[0m  [["active", 1]]
  [1m[36mAssignment Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "assignments" WHERE "assignments"."investigation_id" IS NULL AND "assignments"."officer_id" IS NULL AND "assignments"."end_date" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
AssignmentTest: test_: Assignment should not allow start_date to be set to 3.14159. 
------------------------------------------------------------------------------------
  [1m[36mOfficer Load (0.1ms)[0m  [1m[34mSELECT "officers".* FROM "officers" WHERE "officers"."active" = ?[0m  [["active", 1]]
  [1m[36mAssignment Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "assignments" WHERE "assignments"."investigation_id" IS NULL AND "assignments"."officer_id" IS NULL AND "assignments"."end_date" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------------
AssignmentTest: test_: Within context should never be destroyed. 
-----------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Major Crimes"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.3ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Major Crimes"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Headquarters"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Headquarters"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Homicide"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Homicide"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Section 31"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name", "active") VALUES (?, ?)[0m  [["name", "Section 31"], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------------------
AssignmentTest: test_: Assignment should require officer_id to be set. 
-----------------------------------------------------------------------
  [1m[36mOfficer Load (0.1ms)[0m  [1m[34mSELECT "officers".* FROM "officers" WHERE "officers"."active" = ?[0m  [["active", 1]]
  [1m[36mAssignment Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "assignments" WHERE "assignments"."investigation_id" IS NULL AND "assignments"."officer_id" IS NULL AND "assignments"."end_date" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------------------------------
AssignmentTest: test_: Assignment should not allow start_date to be set to "bad". 
----------------------------------------------------------------------------------
  [1m[36mOfficer Load (0.1ms)[0m  [1m[34mSELECT "officers".* FROM "officers" WHERE "officers"."active" = ?[0m  [["active", 1]]
  [1m[36mAssignment Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "assignments" WHERE "assignments"."investigation_id" IS NULL AND "assignments"."officer_id" IS NULL AND "assignments"."end_date" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------------------------------------------------------
AssignmentTest: test_: Within context should validate end date cannot precede start date but can equal it. 
-----------------------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Major Crimes"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.3ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Major Crimes"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Headquarters"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Headquarters"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Homicide"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name") VALUES (?)[0m  [["name", "Homicide"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUnit Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "units" WHERE LOWER("units"."name") = LOWER(?) LIMIT ?[0m  [["name", "Section 31"], ["LIMIT", 1]]
  [1m[36mUnit Create (0.1ms)[0m  [1m[32mINSERT INTO "units" ("name", "active") VALUES (?, ?)[0m  [["name", "Section 31"], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------
CrimeTest: test_: Within context should never be destroyed. 
------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.5ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Murder"], ["felony", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder, Second Degree"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony", "active") VALUES (?, ?, ?)[0m  [["name", "Murder, Second Degree"], ["felony", 1], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Arson"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Arson"], ["felony", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Robbery"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Robbery"], ["felony", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Trespass"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Trespass"], ["felony", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
CrimeTest: test_: Within context should have active and inactive scopes. 
-------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.3ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Murder"], ["felony", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder, Second Degree"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony", "active") VALUES (?, ?, ?)[0m  [["name", "Murder, Second Degree"], ["felony", 1], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Arson"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Arson"], ["felony", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Robbery"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Robbery"], ["felony", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Trespass"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.2ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Trespass"], ["felony", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "crimes" WHERE "crimes"."active" = ?[0m  [["active", 1]]
  [1m[36mCrime Load (0.1ms)[0m  [1m[34mSELECT "crimes".* FROM "crimes" WHERE "crimes"."active" = ?[0m  [["active", 1]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "crimes" WHERE "crimes"."active" != ?[0m  [["active", 1]]
  [1m[36mCrime Load (0.1ms)[0m  [1m[34mSELECT "crimes".* FROM "crimes" WHERE "crimes"."active" != ?[0m  [["active", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
CrimeTest: test_: Within context should have make_active and make_inactive methods. 
------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.8ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Murder"], ["felony", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder, Second Degree"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony", "active") VALUES (?, ?, ?)[0m  [["name", "Murder, Second Degree"], ["felony", 1], ["active", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Arson"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Arson"], ["felony", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Robbery"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.3ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Robbery"], ["felony", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Trespass"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Trespass"], ["felony", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) AND "crimes"."id" != ? LIMIT ?[0m  [["name", "Arson"], ["id", 3], ["LIMIT", 1]]
  [1m[36mCrime Update (0.1ms)[0m  [1m[33mUPDATE "crimes" SET "active" = ? WHERE "crimes"."id" = ?[0m  [["active", 0], ["id", 3]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCrime Load (0.1ms)[0m  [1m[34mSELECT  "crimes".* FROM "crimes" WHERE "crimes"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) AND "crimes"."id" != ? LIMIT ?[0m  [["name", "Arson"], ["id", 3], ["LIMIT", 1]]
  [1m[36mCrime Update (0.1ms)[0m  [1m[33mUPDATE "crimes" SET "active" = ? WHERE "crimes"."id" = ?[0m  [["active", 1], ["id", 3]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCrime Load (0.0ms)[0m  [1m[34mSELECT  "crimes".* FROM "crimes" WHERE "crimes"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
CrimeTest: test_: Within context should have active and inactive scopes. 
-------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.3ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Murder"], ["felony", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder, Second Degree"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony", "active") VALUES (?, ?, ?)[0m  [["name", "Murder, Second Degree"], ["felony", 1], ["active", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Arson"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Arson"], ["felony", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Robbery"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Robbery"], ["felony", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Trespass"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Trespass"], ["felony", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "crimes" WHERE "crimes"."active" = ?[0m  [["active", 1]]
  [1m[36mCrime Load (0.1ms)[0m  [1m[34mSELECT "crimes".* FROM "crimes" WHERE "crimes"."active" = ?[0m  [["active", 1]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "crimes" WHERE "crimes"."active" != ?[0m  [["active", 1]]
  [1m[36mCrime Load (0.1ms)[0m  [1m[34mSELECT "crimes".* FROM "crimes" WHERE "crimes"."active" != ?[0m  [["active", 1]]
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
CrimeTest: test_: Within context should have make_active and make_inactive methods. 
------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.3ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Murder"], ["felony", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder, Second Degree"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony", "active") VALUES (?, ?, ?)[0m  [["name", "Murder, Second Degree"], ["felony", 1], ["active", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Arson"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.2ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Arson"], ["felony", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Robbery"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.2ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Robbery"], ["felony", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Trespass"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Trespass"], ["felony", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) AND "crimes"."id" != ? LIMIT ?[0m  [["name", "Arson"], ["id", 3], ["LIMIT", 1]]
  [1m[36mCrime Update (0.1ms)[0m  [1m[33mUPDATE "crimes" SET "active" = ? WHERE "crimes"."id" = ?[0m  [["active", 0], ["id", 3]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCrime Load (0.1ms)[0m  [1m[34mSELECT  "crimes".* FROM "crimes" WHERE "crimes"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) AND "crimes"."id" != ? LIMIT ?[0m  [["name", "Arson"], ["id", 3], ["LIMIT", 1]]
  [1m[36mCrime Update (0.1ms)[0m  [1m[33mUPDATE "crimes" SET "active" = ? WHERE "crimes"."id" = ?[0m  [["active", 1], ["id", 3]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCrime Load (0.1ms)[0m  [1m[34mSELECT  "crimes".* FROM "crimes" WHERE "crimes"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------
CrimeTest: test_: Within context should never be destroyed. 
------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.3ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Murder"], ["felony", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder, Second Degree"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony", "active") VALUES (?, ?, ?)[0m  [["name", "Murder, Second Degree"], ["felony", 1], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Arson"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Arson"], ["felony", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Robbery"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Robbery"], ["felony", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Trespass"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Trespass"], ["felony", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------------
CrimeTest: test_: Within context should have an alphabetical scope for ordering. 
---------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.3ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Murder"], ["felony", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder, Second Degree"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony", "active") VALUES (?, ?, ?)[0m  [["name", "Murder, Second Degree"], ["felony", 1], ["active", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Arson"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Arson"], ["felony", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Robbery"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Robbery"], ["felony", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Trespass"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Trespass"], ["felony", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCrime Load (0.1ms)[0m  [1m[34mSELECT "crimes".* FROM "crimes" ORDER BY "crimes"."name" ASC[0m
  [1m[35m (1.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------
CrimeTest: test_: Crime should have many crime_investigations. 
---------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------
CrimeTest: test_: Crime should require name to be set. 
-------------------------------------------------------
  [1m[36mCrime Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE "crimes"."name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------
CrimeTest: test_: Within context should never be destroyed. 
------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.3ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Murder"], ["felony", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder, Second Degree"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony", "active") VALUES (?, ?, ?)[0m  [["name", "Murder, Second Degree"], ["felony", 1], ["active", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Arson"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Arson"], ["felony", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Robbery"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Robbery"], ["felony", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Trespass"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Trespass"], ["felony", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------
CrimeTest: test_: Within context should have a felonies scope. 
---------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.4ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Murder"], ["felony", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder, Second Degree"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony", "active") VALUES (?, ?, ?)[0m  [["name", "Murder, Second Degree"], ["felony", 1], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Arson"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Arson"], ["felony", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Robbery"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Robbery"], ["felony", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Trespass"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Trespass"], ["felony", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "crimes" WHERE "crimes"."felony" = ?[0m  [["felony", 1]]
  [1m[36mCrime Load (0.3ms)[0m  [1m[34mSELECT "crimes".* FROM "crimes" WHERE "crimes"."felony" = ?[0m  [["felony", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------
CrimeTest: test_: Crime should require unique value for name. 
--------------------------------------------------------------
  [1m[36mCrime Load (0.2ms)[0m  [1m[34mSELECT  "crimes".* FROM "crimes" ORDER BY "crimes"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Create (0.4ms)[0m  [1m[32mINSERT INTO "crimes" ("name") VALUES (?)[0m  [["name", "a"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "A"], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
CrimeTest: test_: Within context should have active and inactive scopes. 
-------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.4ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Murder"], ["felony", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder, Second Degree"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony", "active") VALUES (?, ?, ?)[0m  [["name", "Murder, Second Degree"], ["felony", 1], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Arson"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Arson"], ["felony", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Robbery"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.2ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Robbery"], ["felony", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Trespass"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Trespass"], ["felony", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "crimes" WHERE "crimes"."active" = ?[0m  [["active", 1]]
  [1m[36mCrime Load (0.1ms)[0m  [1m[34mSELECT "crimes".* FROM "crimes" WHERE "crimes"."active" = ?[0m  [["active", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "crimes" WHERE "crimes"."active" != ?[0m  [["active", 1]]
  [1m[36mCrime Load (0.1ms)[0m  [1m[34mSELECT "crimes".* FROM "crimes" WHERE "crimes"."active" != ?[0m  [["active", 1]]
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
CrimeTest: test_: Within context should have make_active and make_inactive methods. 
------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.3ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Murder"], ["felony", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder, Second Degree"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony", "active") VALUES (?, ?, ?)[0m  [["name", "Murder, Second Degree"], ["felony", 1], ["active", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Arson"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Arson"], ["felony", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Robbery"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Robbery"], ["felony", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Trespass"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Trespass"], ["felony", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) AND "crimes"."id" != ? LIMIT ?[0m  [["name", "Arson"], ["id", 3], ["LIMIT", 1]]
  [1m[36mCrime Update (0.1ms)[0m  [1m[33mUPDATE "crimes" SET "active" = ? WHERE "crimes"."id" = ?[0m  [["active", 0], ["id", 3]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCrime Load (0.1ms)[0m  [1m[34mSELECT  "crimes".* FROM "crimes" WHERE "crimes"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) AND "crimes"."id" != ? LIMIT ?[0m  [["name", "Arson"], ["id", 3], ["LIMIT", 1]]
  [1m[36mCrime Update (0.1ms)[0m  [1m[33mUPDATE "crimes" SET "active" = ? WHERE "crimes"."id" = ?[0m  [["active", 1], ["id", 3]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCrime Load (0.1ms)[0m  [1m[34mSELECT  "crimes".* FROM "crimes" WHERE "crimes"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------
CrimeTest: test_: Within context should have a misdemeanors scope. 
-------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.2ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Murder"], ["felony", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder, Second Degree"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony", "active") VALUES (?, ?, ?)[0m  [["name", "Murder, Second Degree"], ["felony", 1], ["active", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Arson"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Arson"], ["felony", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Robbery"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Robbery"], ["felony", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Trespass"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Trespass"], ["felony", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "crimes" WHERE "crimes"."felony" != ?[0m  [["felony", 1]]
  [1m[36mCrime Load (0.1ms)[0m  [1m[34mSELECT "crimes".* FROM "crimes" WHERE "crimes"."felony" != ?[0m  [["felony", 1]]
  [1m[35m (1.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------------------------
CrimeTest: test_: Crime should have many investigations through crime_investigations. 
--------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
CrimeTest: test_: Within context should have make_active and make_inactive methods. 
------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.3ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Murder"], ["felony", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder, Second Degree"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony", "active") VALUES (?, ?, ?)[0m  [["name", "Murder, Second Degree"], ["felony", 1], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Arson"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Arson"], ["felony", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Robbery"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Robbery"], ["felony", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Trespass"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Trespass"], ["felony", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) AND "crimes"."id" != ? LIMIT ?[0m  [["name", "Arson"], ["id", 3], ["LIMIT", 1]]
  [1m[36mCrime Update (0.1ms)[0m  [1m[33mUPDATE "crimes" SET "active" = ? WHERE "crimes"."id" = ?[0m  [["active", 0], ["id", 3]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCrime Load (0.1ms)[0m  [1m[34mSELECT  "crimes".* FROM "crimes" WHERE "crimes"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) AND "crimes"."id" != ? LIMIT ?[0m  [["name", "Arson"], ["id", 3], ["LIMIT", 1]]
  [1m[36mCrime Update (0.1ms)[0m  [1m[33mUPDATE "crimes" SET "active" = ? WHERE "crimes"."id" = ?[0m  [["active", 1], ["id", 3]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCrime Load (0.1ms)[0m  [1m[34mSELECT  "crimes".* FROM "crimes" WHERE "crimes"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------------
CrimeTest: test_: Within context should have an alphabetical scope for ordering. 
---------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.3ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Murder"], ["felony", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder, Second Degree"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony", "active") VALUES (?, ?, ?)[0m  [["name", "Murder, Second Degree"], ["felony", 1], ["active", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Arson"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Arson"], ["felony", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Robbery"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Robbery"], ["felony", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Trespass"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Trespass"], ["felony", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCrime Load (0.1ms)[0m  [1m[34mSELECT "crimes".* FROM "crimes" ORDER BY "crimes"."name" ASC[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------
CrimeTest: test_: Within context should have a misdemeanors scope. 
-------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.2ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Murder"], ["felony", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder, Second Degree"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.3ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony", "active") VALUES (?, ?, ?)[0m  [["name", "Murder, Second Degree"], ["felony", 1], ["active", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Arson"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Arson"], ["felony", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Robbery"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Robbery"], ["felony", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Trespass"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Trespass"], ["felony", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "crimes" WHERE "crimes"."felony" != ?[0m  [["felony", 1]]
  [1m[36mCrime Load (0.1ms)[0m  [1m[34mSELECT "crimes".* FROM "crimes" WHERE "crimes"."felony" != ?[0m  [["felony", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------
CrimeTest: test_: Within context should never be destroyed. 
------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.3ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Murder"], ["felony", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder, Second Degree"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony", "active") VALUES (?, ?, ?)[0m  [["name", "Murder, Second Degree"], ["felony", 1], ["active", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Arson"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Arson"], ["felony", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Robbery"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Robbery"], ["felony", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Trespass"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Trespass"], ["felony", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------------------------
CrimeTest: test_: Crime should have many investigations through crime_investigations. 
--------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------
CrimeTest: test_: Crime should have many crime_investigations. 
---------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------
CrimeTest: test_: Within context should have a felonies scope. 
---------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.3ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Murder"], ["felony", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder, Second Degree"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony", "active") VALUES (?, ?, ?)[0m  [["name", "Murder, Second Degree"], ["felony", 1], ["active", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Arson"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Arson"], ["felony", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Robbery"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Robbery"], ["felony", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Trespass"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Trespass"], ["felony", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "crimes" WHERE "crimes"."felony" = ?[0m  [["felony", 1]]
  [1m[36mCrime Load (0.1ms)[0m  [1m[34mSELECT "crimes".* FROM "crimes" WHERE "crimes"."felony" = ?[0m  [["felony", 1]]
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------
CrimeTest: test_: Crime should require name to be set. 
-------------------------------------------------------
  [1m[36mCrime Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE "crimes"."name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------
CrimeTest: test_: Crime should require unique value for name. 
--------------------------------------------------------------
  [1m[36mCrime Load (0.1ms)[0m  [1m[34mSELECT  "crimes".* FROM "crimes" ORDER BY "crimes"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Create (1.0ms)[0m  [1m[32mINSERT INTO "crimes" ("name") VALUES (?)[0m  [["name", "a"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "A"], ["LIMIT", 1]]
  [1m[35m (1.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
CrimeTest: test_: Within context should have active and inactive scopes. 
-------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.6ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Murder"], ["felony", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder, Second Degree"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony", "active") VALUES (?, ?, ?)[0m  [["name", "Murder, Second Degree"], ["felony", 1], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Arson"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Arson"], ["felony", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Robbery"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Robbery"], ["felony", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Trespass"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Trespass"], ["felony", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------
CrimeTest: test_: Within context should have a felonies scope. 
---------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.4ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Murder"], ["felony", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder, Second Degree"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.2ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony", "active") VALUES (?, ?, ?)[0m  [["name", "Murder, Second Degree"], ["felony", 1], ["active", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Arson"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Arson"], ["felony", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Robbery"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Robbery"], ["felony", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Trespass"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Trespass"], ["felony", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "crimes" WHERE "crimes"."felony" = ?[0m  [["felony", 1]]
  [1m[36mCrime Load (0.1ms)[0m  [1m[34mSELECT "crimes".* FROM "crimes" WHERE "crimes"."felony" = ?[0m  [["felony", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------
CrimeTest: test_: Within context should never be destroyed. 
------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.3ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Murder"], ["felony", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder, Second Degree"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony", "active") VALUES (?, ?, ?)[0m  [["name", "Murder, Second Degree"], ["felony", 1], ["active", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Arson"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Arson"], ["felony", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Robbery"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Robbery"], ["felony", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Trespass"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Trespass"], ["felony", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
CrimeTest: test_: Within context should have active and inactive scopes. 
-------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.3ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Murder"], ["felony", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder, Second Degree"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony", "active") VALUES (?, ?, ?)[0m  [["name", "Murder, Second Degree"], ["felony", 1], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Arson"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Arson"], ["felony", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Robbery"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Robbery"], ["felony", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Trespass"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Trespass"], ["felony", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "crimes" WHERE "crimes"."active" = ?[0m  [["active", 1]]
  [1m[36mCrime Load (0.1ms)[0m  [1m[34mSELECT "crimes".* FROM "crimes" WHERE "crimes"."active" = ?[0m  [["active", 1]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "crimes" WHERE "crimes"."active" != ?[0m  [["active", 1]]
  [1m[36mCrime Load (0.1ms)[0m  [1m[34mSELECT "crimes".* FROM "crimes" WHERE "crimes"."active" != ?[0m  [["active", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------------
CrimeTest: test_: Within context should have an alphabetical scope for ordering. 
---------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.3ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Murder"], ["felony", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder, Second Degree"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony", "active") VALUES (?, ?, ?)[0m  [["name", "Murder, Second Degree"], ["felony", 1], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Arson"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Arson"], ["felony", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Robbery"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Robbery"], ["felony", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Trespass"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Trespass"], ["felony", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCrime Load (0.1ms)[0m  [1m[34mSELECT "crimes".* FROM "crimes" ORDER BY "crimes"."name" ASC[0m
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------
CrimeTest: test_: Crime should require name to be set. 
-------------------------------------------------------
  [1m[36mCrime Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE "crimes"."name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------
CrimeTest: test_: Crime should have many crime_investigations. 
---------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
CrimeTest: test_: Within context should have make_active and make_inactive methods. 
------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.3ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Murder"], ["felony", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder, Second Degree"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony", "active") VALUES (?, ?, ?)[0m  [["name", "Murder, Second Degree"], ["felony", 1], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Arson"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Arson"], ["felony", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Robbery"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.2ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Robbery"], ["felony", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Trespass"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Trespass"], ["felony", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) AND "crimes"."id" != ? LIMIT ?[0m  [["name", "Arson"], ["id", 3], ["LIMIT", 1]]
  [1m[36mCrime Update (0.1ms)[0m  [1m[33mUPDATE "crimes" SET "active" = ? WHERE "crimes"."id" = ?[0m  [["active", 0], ["id", 3]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCrime Load (0.1ms)[0m  [1m[34mSELECT  "crimes".* FROM "crimes" WHERE "crimes"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) AND "crimes"."id" != ? LIMIT ?[0m  [["name", "Arson"], ["id", 3], ["LIMIT", 1]]
  [1m[36mCrime Update (0.1ms)[0m  [1m[33mUPDATE "crimes" SET "active" = ? WHERE "crimes"."id" = ?[0m  [["active", 1], ["id", 3]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCrime Load (0.1ms)[0m  [1m[34mSELECT  "crimes".* FROM "crimes" WHERE "crimes"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.9ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------
CrimeTest: test_: Crime should require unique value for name. 
--------------------------------------------------------------
  [1m[36mCrime Load (0.1ms)[0m  [1m[34mSELECT  "crimes".* FROM "crimes" ORDER BY "crimes"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Create (0.5ms)[0m  [1m[32mINSERT INTO "crimes" ("name") VALUES (?)[0m  [["name", "a"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "A"], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------------------------
CrimeTest: test_: Crime should have many investigations through crime_investigations. 
--------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------
CrimeTest: test_: Within context should have a misdemeanors scope. 
-------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.2ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Murder"], ["felony", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder, Second Degree"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony", "active") VALUES (?, ?, ?)[0m  [["name", "Murder, Second Degree"], ["felony", 1], ["active", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Arson"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Arson"], ["felony", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Robbery"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Robbery"], ["felony", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Trespass"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.3ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Trespass"], ["felony", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "crimes" WHERE "crimes"."felony" != ?[0m  [["felony", 1]]
  [1m[36mCrime Load (0.1ms)[0m  [1m[34mSELECT "crimes".* FROM "crimes" WHERE "crimes"."felony" != ?[0m  [["felony", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------------
CrimeTest: test_: Within context should have an alphabetical scope for ordering. 
---------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.4ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Murder"], ["felony", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder, Second Degree"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony", "active") VALUES (?, ?, ?)[0m  [["name", "Murder, Second Degree"], ["felony", 1], ["active", 0]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Arson"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Arson"], ["felony", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Robbery"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Robbery"], ["felony", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Trespass"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Trespass"], ["felony", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCrime Load (0.1ms)[0m  [1m[34mSELECT "crimes".* FROM "crimes" ORDER BY "crimes"."name" ASC[0m
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------------------------
CrimeTest: test_: Crime should have many investigations through crime_investigations. 
--------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------
CrimeTest: test_: Within context should have a misdemeanors scope. 
-------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.4ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Murder"], ["felony", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder, Second Degree"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony", "active") VALUES (?, ?, ?)[0m  [["name", "Murder, Second Degree"], ["felony", 1], ["active", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Arson"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Arson"], ["felony", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Robbery"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Robbery"], ["felony", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Trespass"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Trespass"], ["felony", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "crimes" WHERE "crimes"."felony" != ?[0m  [["felony", 1]]
  [1m[36mCrime Load (0.1ms)[0m  [1m[34mSELECT "crimes".* FROM "crimes" WHERE "crimes"."felony" != ?[0m  [["felony", 1]]
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
CrimeTest: test_: Within context should have make_active and make_inactive methods. 
------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.3ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Murder"], ["felony", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder, Second Degree"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony", "active") VALUES (?, ?, ?)[0m  [["name", "Murder, Second Degree"], ["felony", 1], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Arson"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Arson"], ["felony", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Robbery"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.2ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Robbery"], ["felony", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Trespass"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.3ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Trespass"], ["felony", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) AND "crimes"."id" != ? LIMIT ?[0m  [["name", "Arson"], ["id", 3], ["LIMIT", 1]]
  [1m[36mCrime Update (0.1ms)[0m  [1m[33mUPDATE "crimes" SET "active" = ? WHERE "crimes"."id" = ?[0m  [["active", 0], ["id", 3]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCrime Load (0.1ms)[0m  [1m[34mSELECT  "crimes".* FROM "crimes" WHERE "crimes"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) AND "crimes"."id" != ? LIMIT ?[0m  [["name", "Arson"], ["id", 3], ["LIMIT", 1]]
  [1m[36mCrime Update (0.1ms)[0m  [1m[33mUPDATE "crimes" SET "active" = ? WHERE "crimes"."id" = ?[0m  [["active", 1], ["id", 3]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCrime Load (0.0ms)[0m  [1m[34mSELECT  "crimes".* FROM "crimes" WHERE "crimes"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------
CrimeTest: test_: Crime should require name to be set. 
-------------------------------------------------------
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE "crimes"."name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------
CrimeTest: test_: Within context should never be destroyed. 
------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.3ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Murder"], ["felony", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder, Second Degree"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony", "active") VALUES (?, ?, ?)[0m  [["name", "Murder, Second Degree"], ["felony", 1], ["active", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Arson"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Arson"], ["felony", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Robbery"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Robbery"], ["felony", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Trespass"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.5ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Trespass"], ["felony", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------
CrimeTest: test_: Within context should have a felonies scope. 
---------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.3ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Murder"], ["felony", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder, Second Degree"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony", "active") VALUES (?, ?, ?)[0m  [["name", "Murder, Second Degree"], ["felony", 1], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Arson"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Arson"], ["felony", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Robbery"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Robbery"], ["felony", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Trespass"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Trespass"], ["felony", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "crimes" WHERE "crimes"."felony" = ?[0m  [["felony", 1]]
  [1m[36mCrime Load (0.1ms)[0m  [1m[34mSELECT "crimes".* FROM "crimes" WHERE "crimes"."felony" = ?[0m  [["felony", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------
CrimeTest: test_: Crime should require unique value for name. 
--------------------------------------------------------------
  [1m[36mCrime Load (0.2ms)[0m  [1m[34mSELECT  "crimes".* FROM "crimes" ORDER BY "crimes"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Create (0.3ms)[0m  [1m[32mINSERT INTO "crimes" ("name") VALUES (?)[0m  [["name", "a"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "A"], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------
CrimeTest: test_: Crime should have many crime_investigations. 
---------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
CrimeTest: test_: Within context should have make_active and make_inactive methods. 
------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.3ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Murder"], ["felony", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder, Second Degree"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony", "active") VALUES (?, ?, ?)[0m  [["name", "Murder, Second Degree"], ["felony", 1], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Arson"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Arson"], ["felony", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Robbery"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Robbery"], ["felony", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Trespass"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Trespass"], ["felony", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) AND "crimes"."id" != ? LIMIT ?[0m  [["name", "Arson"], ["id", 3], ["LIMIT", 1]]
  [1m[36mCrime Update (0.3ms)[0m  [1m[33mUPDATE "crimes" SET "active" = ? WHERE "crimes"."id" = ?[0m  [["active", 0], ["id", 3]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCrime Load (0.1ms)[0m  [1m[34mSELECT  "crimes".* FROM "crimes" WHERE "crimes"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) AND "crimes"."id" != ? LIMIT ?[0m  [["name", "Arson"], ["id", 3], ["LIMIT", 1]]
  [1m[36mCrime Update (0.1ms)[0m  [1m[33mUPDATE "crimes" SET "active" = ? WHERE "crimes"."id" = ?[0m  [["active", 1], ["id", 3]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCrime Load (0.1ms)[0m  [1m[34mSELECT  "crimes".* FROM "crimes" WHERE "crimes"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (1.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------
CrimeTest: test_: Within context should never be destroyed. 
------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.3ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Murder"], ["felony", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder, Second Degree"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony", "active") VALUES (?, ?, ?)[0m  [["name", "Murder, Second Degree"], ["felony", 1], ["active", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Arson"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.2ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Arson"], ["felony", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Robbery"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Robbery"], ["felony", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Trespass"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Trespass"], ["felony", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
CrimeTest: test_: Within context should have active and inactive scopes. 
-------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.2ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Murder"], ["felony", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Murder, Second Degree"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony", "active") VALUES (?, ?, ?)[0m  [["name", "Murder, Second Degree"], ["felony", 1], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Arson"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Arson"], ["felony", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Robbery"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Robbery"], ["felony", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCrime Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "crimes" WHERE LOWER("crimes"."name") = LOWER(?) LIMIT ?[0m  [["name", "Trespass"], ["LIMIT", 1]]
  [1m[36mCrime Create (0.1ms)[0m  [1m[32mINSERT INTO "crimes" ("name", "felony") VALUES (?, ?)[0m  [["name", "Trespass"], ["felony", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "crimes" WHERE "crimes"."active" = ?[0m  [["active", 1]]
  [1m[36mCrime Load (0.1ms)[0m  [1m[34mSELECT "crimes".* FROM "crimes" WHERE "crimes"."active" = ?[0m  [["active", 1]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "crimes" WHERE "crimes"."active" != ?[0m  [["active", 1]]
  [1m[36mCrime Load (0.1ms)[0m  [1m[34mSELECT "crimes".* FROM "crimes" WHERE "crimes"."active" != ?[0m  [["active", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
